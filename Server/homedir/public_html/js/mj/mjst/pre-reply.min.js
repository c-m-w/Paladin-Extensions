!function(b,g,e,h){XF.MJSTeditorStart={started:!1,startAll:function(){XF.MJSTeditorStart.started||(XF.MJSTeditorStart.registerCommands(),XF.MJSTeditorStart.started=!0)},togglePreReplyBox:function(b,a){var c=b.$oel.data("mjstPreReplyBox");c&&(b.$wp.toggleClassTransitioned("replyBox-active",a),c.toggleClassTransitioned("is-active",a),b.$tb.find(".fr-command[data-cmd=mjstPreReply]").toggleClass("fr-active xxx",a))},registerCommands:function(){try{var f=b.parseJSON(b(".js-mjstPreReply").first().html())||
{}}catch(a){console.error(a),f={}}b.FE.DefineIcon("mjstPreReply",{NAME:"ticket"});b.FE.RegisterCommand("mjstPreReply",{title:"Pre Reply",icon:"mjstPreReply",undo:!1,focus:!1,refresh:function(a){var b=this.$oel.data("mjstPreReplyBox"),d=!1;b&&(d=b.hasClass("is-active"));a.toggleClass("fr-active",d)},callback:function(){var a=this,c=a.$oel.data("mjstPreReplyBox");if(c){var d=c.hasClass("is-active");XF.MJSTeditorStart.togglePreReplyBox(a,d?!1:!0)}else c=b('<div class="mjstEditorPreReplies" />'),a.$oel.data("mjstPreReplyBox",
c),a.$wp.after(c),XF.ajax("GET",XF.canonicalizeUrl("index.php?support-tickets/pre-replies"),{submitter:f.submitter},function(d){d.html&&XF.setupHtmlInsert(d.html,function(d){a.events.bindClick(c,"li.reply",function(c){c=b(c.currentTarget).clone().find(".reply-full").html();XF.EditorHelpers.focus(a);a.html.insert(b("<div />").html(c).html())});c.html(d);XF.MJSTeditorStart.togglePreReplyBox(a,!0)})})}})}};XF.MJSTeditorButtons={started:!1,initButtons:function(b,a){XF.MJSTeditorButtons.started||(a.buttons+=
",|,mjstPreReply",XF.MJSTeditorButtons.started=!0)}};b(e).one("editor:start",XF.MJSTeditorStart.startAll);b(e).one("editor:buttons",XF.MJSTeditorButtons.initButtons)}(jQuery,window,document);