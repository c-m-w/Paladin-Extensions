!function(d,c,g,v){var n=function(a){!0!==c.th_reactionsCloseAdded&&(d(g).click(function(a){0===d(a.target).closest(".reactions-right").length&&(a=d(".reactions-bar--show"),a.length&&(a=a.closest(".reactions-right").find(".th_reactions__trigger"),a.length&&h(a.last())))}),d(c).resize(function(){q()}),g.addEventListener("touchmove",function(a){k(a)}),g.addEventListener("touchend",function(a){p(a)}),c.th_reactionsCloseAdded=!0);th_reactionsSecondaryTrigger?(c.th_reactionsEnableHover=!0,a=d(".th_reactions__triggerSecondary")):
a=d(".th_reactions__trigger");a.off("hover");a.hover(function(a){d(a.target).removeClass("th_reactions__trigger--hoverOut").addClass("th_reactions__trigger--hoverIn")},function(a){var b=d(a.target);b.removeClass("th_reactions__trigger--hoverIn").addClass("th_reactions__trigger--hoverOut");c.setTimeout(function(){b.removeClass("th_reactions__trigger--hoverOut")},300)});th_reactionsEnableHover&&(a.off("mouseenter"),a.mouseenter(function(a){var b=d(a.target);a=!1;"undefined"!==typeof c.th_reactionsIgnoreInContainer&&
null!==c.th_reactionsIgnoreInContainer&&th_reactionsIgnoreInContainer.length&&c.th_reactionsIgnoreInContainer.find(b).length&&(a=!0);!1!==a||b.closest(".reactions-right").find(".reactions-right__list").hasClass("reactions-bar--show")||(c.th_reactions_intentTimer=c.setTimeout(function(){b.closest(".reactions-right").find(".reactions-right__list").hasClass("reactions-bar--show")||h(b)},200),b.mousemove(function(){clearTimeout(c.th_reactions_intentTimer);c.th_reactions_intentTimer=c.setTimeout(function(){b.closest(".reactions-right").find(".reactions-right__list").hasClass("reactions-bar--show")||
h(b)},200)}))}),a.mouseleave(function(a){c.th_reactionsIgnoreInContainer=null;a=d(a.target);null!==c.th_reactions_intentTimer&&clearTimeout(c.th_reactions_intentTimer);c.th_reactions_intentTimer=null;a.off("mousemove")}));for(var b=g.querySelectorAll(".th_reactions__reaction"),e=0,l=b.length;e<l;e++){var f=b[e];f.removeEventListener("mouseover",k);f.addEventListener("mouseover",k);f.removeEventListener("touchstart",k);f.addEventListener("touchstart",function(a){a.preventDefault();k(a)},{passive:!1});
f.removeEventListener("touchend",p);f.addEventListener("touchend",p)}var h=function(a){clearTimeout(c.th_reactions_intentTimer);a=a.closest(".reactions-right").find(".reactions-right__list");var b=a.parent();a.hasClass("reactions-bar--show")?(m(),a.removeClass("reactions-bar--show"),void a.width(),a.addClass("reactions-bar--hide"),b.removeClass("reactions-barChildren--show")):(a.removeClass("reactions-bar--hide"),void a.width(),a.addClass("reactions-bar--show"),b.addClass("reactions-barChildren--show"))};
b=d(".th_reactions__triggerSecondary");b.off("click");b.click(function(a){a=d(this);a.off("mousemove");clearTimeout(c.th_reactions_intentTimer);h(a)});a.off("touchstart");a.off("touchend");a.on("touchstart",function(a){var b=d(a.currentTarget),e=Date.now(),u=c.setTimeout(function(){b.off("touchend");h(b);g.body.addEventListener("touchmove",r,{passive:!1})},250);b.on("touchend",function(a){clearTimeout(u);if(250>Date.now()-e)if(th_reactionsEnableHover)b.off("click"),b.find("span").click();else{var d=
b.closest(".reactions-right").find(".reactions-right__list");d.parent();d.hasClass("reactions-bar--show")?(b.off("click"),b.find("span").click()):(c.setTimeout(function(){h(b)},0),a.preventDefault())}a.preventDefault()});a.preventDefault();return!1});a.off("click");a.click(function(a){var b=d(a.currentTarget);if(th_reactionsEnableHover)b.off("click"),b.find("span").click();else{var e=b.closest(".reactions-right").find(".reactions-right__list");e.parent();e.hasClass("reactions-bar--show")?(b.off("click"),
b.find("span").click()):(c.setTimeout(function(){h(b)},0),a.preventDefault())}});q();a=d(".th_reactions__rightScrollRight");a.off("click");a.click(function(a){m();var b=d(a.target).closest(".reactions-right").find(".reactions-right__list").get(0),e=b.scrollLeft,f=b.offsetWidth;for(a=0;15>=a;a++)(function(a){c.setTimeout(function(){b.scrollLeft=e+(f-40)/15*a},17*a)})(a)});a=d(".th_reactions__leftScrollLeft");a.off("click");a.click(function(a){m();var b=d(a.target).closest(".reactions-right").find(".reactions-right__list").get(0),
e=b.scrollLeft,f=b.offsetWidth;for(a=0;15>=a;a++)(function(a){c.setTimeout(function(){b.scrollLeft=e-(f-50)/15*a},17*a)})(a)})},p=function(a){a=d(".th_reactions__reaction--hovered");a.length&&(a.removeClass("th_reactions__reaction--hovered"),a.find("a").click())},r=function(a){a.preventDefault()},k=function(a){var b=d(a.target);if(a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length||a.touches&&a.touches.length)b="undefined"!==typeof a.originalEvent?a.originalEvent.changedTouches[0]:
a.touches[0],b=g.elementFromPoint(b.clientX,b.clientY),b=d(b);b.hasClass("th_reactions__reaction")||(b=b.closest(".th_reactions__reaction"));if(b.length){if(!b.hasClass("th_reactions__reaction--hovered")&&(m(),b.addClass("th_reactions__reaction--hovered"),a=b.closest(".reactions-right"),a.length)){var c=a.get(0).getBoundingClientRect(),l=b.get(0).getBoundingClientRect();b=d('<div class="th_reactions__reactionLabel" style="top: '+Math.round(l.top-c.top-32)+"px; left: "+Math.round(l.left-c.left+l.width/
2)+'px;">'+b.find(".reaction").attr("title")+"</div>");a.append(b)}}else m()},m=function(){g.body.removeEventListener("touchmove",r);var a=d(".th_reactions__reaction--hovered"),b=d(".th_reactions__reactionLabel");a.length&&(a.addClass("th_reactions__reaction--hoveredOut"),c.setTimeout(function(b){a.removeClass("th_reactions__reaction--hovered")},17),c.setTimeout(function(b){a.removeClass("th_reactions__reaction--hoveredOut")},317));b.length&&(b.addClass("th_reactions__reactionLabel--out"),void b.width(),
c.setTimeout(function(a){b.remove()},200))},q=function(){for(var a=d(".reactions-right"),b=[],e=0,l=a.length;e<l;e++){var f=d(a[e]),h=f.find(".reactions-right__list"),g=f.find(".th_reactions__scrollContainer"),k=h.get(0);b.push({ele:f,list:h,rawEle:k,parentEle:f,parentRight:f.get(0).getBoundingClientRect().right,containerEle:g,containerWidth:g.get(0).getBoundingClientRect().width,offsetWidth:k.offsetWidth,scrollWidth:k.scrollWidth,scrollLeft:k.scrollLeft})}e=0;for(l=b.length;e<l;e++)a=b[e],h=c.innerWidth,
a.scrollWidth<.9*h?(a.list.off("scroll"),a.list.css("width",a.scrollWidth+"px"),a.ele.removeClass("th_reactions__reactionsBar--overflowing")):(a.list.css("width",""),a.ele.hasClass("th_reactions__reactionsBar--overflowing")||(a.ele.addClass("th_reactions__reactionsBar--overflowing"),a.containerEle.css("right",15-(h-a.parentRight))+"px",a.list.off("scroll"),a.list.scroll(function(a){var b=d(a.target);f=b.closest(".reactions-right");var c=f.find(".th_reactions__scrollContainer");t({ele:b,rawEle:a.target,
parentEle:f,parentRight:f.get(0).getBoundingClientRect().right,containerEle:c,containerWidth:c.get(0).offsetWidth,offsetWidth:a.target.offsetWidth,scrollWidth:a.target.scrollWidth,scrollLeft:a.target.scrollLeft})}),t(a)))},t=function(a){var b=a.parentEle,c=a.scrollWidth,d=a.scrollLeft;a=a.scrollLeft+a.offsetWidth;b.hasClass("th_reactions__rightScroll--inactive")?a<c&&b.removeClass("th_reactions__rightScroll--inactive"):a>=c&&b.addClass("th_reactions__rightScroll--inactive");b.hasClass("th_reactions__leftScroll--inactive")?
0<d&&b.removeClass("th_reactions__leftScroll--inactive"):0>=d&&b.addClass("th_reactions__leftScroll--inactive")};XF.ReactClick=XF.Click.newHandler({eventNameSpace:"XFReactClick",options:{container:".reactions-bar",target:null,href:null},$loaderTarget:null,$container:null,href:null,loading:!1,init:function(){var a=this.options.container;a=a?this.$target.closest(a):this.$target;var b=this.options.target;b&&XF.findRelativeIf(b,this.$container);this.$container=a;this.options.href||(this.href=this.$target.attr("href"));
this.href||console.error("No reaction href for %o",this.$target)},click:function(a){if(!th_reactionsEnableHover){var b=d(a.target);if(b.closest(".th_reactions__trigger").length&&!b.closest(".reactions-right").find(".reactions-right__list").hasClass("reactions-bar--show"))return}a.preventDefault();d(".tooltip").hide();if(!this.loading){this.loading=!0;var c=this;XF.ajax("POST",this.href,null,d.proxy(this,"handleAjax"),{skipDefaultSuccess:!0}).always(function(){c.loading=!1})}},handleAjax:function(a){var b=
this.$container;"undefined"!==typeof a.html&&this.$container.length&&a.html.content&&XF.setupHtmlInsert(a.html,function(a,d){b.html(a);c.th_reactionsIgnoreInContainer=b;n()})}});!1!==c.th_reactionsEnableHover&&(c.th_reactionsEnableHover=!0);XF.Click.register("react","XF.ReactClick");d(g).on("xf:reinit",function(){c.setTimeout(function(){n()},300)});"ready"===g.readyState||"complete"===g.readyState?c.setTimeout(function(){n()},300):d(g).ready(n)}(jQuery,window,document);