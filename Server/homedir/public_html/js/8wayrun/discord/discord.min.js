var EWRdiscord=window.EWRdiscord||{};
!function(b,f,g){EWRdiscord.Botcheck=XF.Element.newHandler({$target:null,token:null,init:function(){$target=this.$target;token=$target.data("token");$target.on("click",$target,b.proxy(this,"click"))},click:function(b){var c=0,a=new WebSocket("wss://gateway.discord.gg/?encoding=json&v=6");a.onopen=function(){console.log("Discord: Websocket OPEN")};a.onerror=function(a){console.error(a)};a.onclose=function(a){console.error(a)};a.onmessage=function(b){try{var d=JSON.parse(b.data);c=d.s;"10"==d.op&&($target.addClass("button--cta"),
$target.find(".button-text").text("CONNECTED"),console.log("Discord: Sending handshake"),a.send(JSON.stringify({op:2,d:{token:token,properties:{$browser:"DiscordBot (8wayrunBot, v2)"},large_threshold:50}})),setInterval(function(){$target.find(".button-text").text("HEARTBEAT");console.log("Discord: Sending heartbeat ("+c+")");a.send(JSON.stringify({op:1,d:c}))},d.d.heartbeat_interval))}catch(e){$target.removeClass("button--cta"),$target.find(".button-text").text("ERROR"),console.error(e)}}}});XF.Element.register("discord-botcheck",
"EWRdiscord.Botcheck")}(window.jQuery,window,document);