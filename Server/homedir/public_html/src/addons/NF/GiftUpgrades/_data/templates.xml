<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="nfg_option_list_option_select_multi" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:selectunit label="{$preparedOption.title}" name="{$fieldPrefix}[{$preparedOption.option_id}]" hint="{$preparedOption.hint}" inputclass="{$preparedOption.inputClass}" multiple="multiple">
	<xen:options source="$formatParams" />
	<xen:explain>{xen:raw $preparedOption.explain}</xen:explain>
	<xen:html>
		<input type="hidden" name="{$listedFieldName}" value="{$preparedOption.option_id}" />
		{xen:raw $editLink}
	</xen:html>
</xen:selectunit>]]></template>
  <template type="admin" title="nixfifty_giftupgrades_giftedby_label" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:if is="{$_upgrade.PurchaseRequest.extra_data.is_gift}">
	({{ phrase('nixfifty_giftupgrades_from:') }}
	<xf:username user="{$_upgrade.PurchaseRequest.extra_data.payUser}"
				 defaultname="{{ phrase('guest') }}"
				 href="{{ link('users/edit', $_upgrade.PurchaseRequest.extra_data.payUser) }}" />{{ $_upgrade.PurchaseRequest.extra_data.is_anonymous ? '*' : '' }})
</xf:if>]]></template>
  <template type="admin" title="nixfifty_giftupgrades_helper_criteria_user" version_id="2000070" version_string="2.0.0"><![CDATA[<li><label>
	<input type="checkbox" name="user_criteria[giftupgrades_gift_received_count][rule]" value="giftupgrades_gift_received_count" class="Disabler" id="ucrit_giftupgrades_gift_received_count" {xen:checked $userCriteria.giftupgrades_gift_received_count} />
	{xen:phrase nixfifty_giftupgrades_user_has_received_at_least_x_gifts}:</label>
	<div class="criteriaQualifier" id="ucrit_giftupgrades_gift_received_count_Disabler">
		<xen:spinbox name="user_criteria[giftupgrades_gift_received_count][data][items]" value="{$userCriteria.giftupgrades_gift_received_count.items}" size="5" min="0" step="1" />
	</div>
</li>

<li><label>
	<input type="checkbox" name="user_criteria[giftupgrades_gift_given_count][rule]" value="giftupgrades_gift_given_count" class="Disabler" id="ucrit_giftupgrades_gift_given_count" {xen:checked $userCriteria.giftupgrades_gift_given_count} />
	{xen:phrase nixfifty_giftupgrades_user_has_given_at_least_x_gifts}:</label>
	<div class="criteriaQualifier" id="ucrit_giftupgrades_gift_given_count_Disabler">
		<xen:spinbox name="user_criteria[giftupgrades_gift_given_count][data][items]" value="{$userCriteria.giftupgrades_gift_given_count.items}" size="5" min="0" step="1" />
	</div>
</li>]]></template>
  <template type="public" title="alert_post_upgrade_gifted" version_id="2000070" version_string="2.0.0"><![CDATA[{xen:phrase nf_alert_post_upgrade_gifted,
	'name={xen:helper username, $user, 'subject'}',
	'title=<a href="{xen:link posts, $content}" class="PopupItemLink">{xen:helper threadPrefix, $content}{$content.title}</a>'
}]]></template>
  <template type="public" title="alert_post_upgrade_gifted_anon" version_id="2000070" version_string="2.0.0"><![CDATA[{xen:phrase nf_alert_post_upgrade_gifted_anon,
	'title=<a href="{xen:link posts, $content}" class="PopupItemLink">{xen:helper threadPrefix, $content}{$content.title}</a>'
}]]></template>
  <template type="public" title="alert_profile_post_upgrade_gifted" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$visitor.user_id} == {$content.profile_user_id}">
	{xen:phrase nf_alert_profile_post_upgrade_gifted,
		'name={xen:helper username, $user, 'subject'}',
		'status_attributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"'
	}
<xen:else />
	{xen:phrase nf_alert_profile_post_upgrade_gifted_other,
		'name={xen:helper username, $user, 'subject'}',
		'post_attributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"',
		'profile={$content.profile_username}'
	}
</xen:if>]]></template>
  <template type="public" title="alert_profile_post_upgrade_gifted_anon" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$visitor.user_id} == {$content.profile_user_id}">
	{xen:phrase nf_alert_profile_post_upgrade_gifted_anon,
		'status_attributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"'
	}
<xen:else />
	{xen:phrase nf_alert_profile_post_upgrade_gifted_other_anon,
		'post_attributes=href="{xen:link profile-posts, $content}" class="PopupItemLink"',
		'profile={$content.profile_username}'
	}
</xen:if>]]></template>
  <template type="public" title="alert_user_upgrade_gifted" version_id="2000070" version_string="2.0.0"><![CDATA[{{ phrase('nf_alert_user_upgrade_gifted', {
	'name': username_link($user, false, {'defaultname': $alert.username}),
	'link': link('account/upgrades')})
}}]]></template>
  <template type="public" title="alert_user_upgrade_gifted_anon" version_id="2000070" version_string="2.0.0"><![CDATA[{{ phrase('nf_alert_user_upgrade_gifted_anon', {
	'link': link('account/upgrades')})
}}]]></template>
  <template type="public" title="forum_list_gifted_posts" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$giftedPosts}">
    <style>
        .giftedPostList .snippet {
            font-size: 11px;
            color: {xen:property dimmedTextColor};
        }
        .giftedPostList .postListItem {
            padding-bottom:2px;
        }
        .giftedPostList .postListItem:last-child {
            padding-bottom:0px;
        }
    </style>
    <div class="section giftedPostList">
        <div class="secondaryContent">
            <h3>{xen:phrase nf_recent_gifted_posts}</h3>

            <ul>
                <xen:foreach loop="{$giftedPosts}" value="{$post}">
                    <li id="post-{$post.post_id}" class="threadListItem postListItem {xen:if $post.isIgnored, ' ignored'}" data-author="{$post.username}">
                        <div class="postInfo">

                            <div class="messageContent">
                                <div class="title">
                                    <a href="{xen:link posts, $post}">{xen:helper threadPrefix, $post}{$post.title}</a>
                                </div>

                                <xen:if is="{$xenOptions.nf_giftSnippetLength} > 0">
                                    <div class="snippet muted">
                                        {xen:helper snippet, $post.message, $xenOptions.nf_giftSnippetLength, {xen:array 'stripQuote=1', 'fromStart=1'}}
                                    </div>
                                </xen:if>
                            </div>

                            <div class="additionalRow muted">
                                {xen:phrase post_by}: <xen:username user="$post" />,
                                <xen:datetime time="{$post.post_date}" />
                            </div>

                            <div class="additionalRow muted">
                                <a href="{xen:link forums, $post.forum}" class="forumLink">{$post.forum.title}</a>
                            </div>
                        </div>
                    </li>
                </xen:foreach>
            </ul>
        </div>
    </div>
</xen:if>]]></template>
  <template type="public" title="nf_content_gift" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:title>{xen:phrase nf_gift_upgrade_to_x, 'user={$giftUser.username}'}</xen:title>

<xen:navigation>
	<xen:breadcrumb source="$breadcrumbs" />
</xen:navigation>

<form method="post" class="xenForm formOverlay" action="{$pageUrl}">
	<dl class="ctrlUnit">
		<dt><label for="ctrl_upgrade">{xen:phrase upgrade}:</label></dt>
		<dd>
			<select name="upgrade_id" class="textCtrl" id="ctrl_upgrade">
				<xen:foreach loop="$upgrades" value="$upgrade">
					<xen:if is="{$upgrade.can_gift}">
						<option value="{$upgrade.user_upgrade_id}">{$upgrade.title} ({$upgrade.costPhrase})</option>
					</xen:if>
				</xen:foreach>
			</select>
		</dd>
	</dl>

	<xen:if is="{$processors}">
		<dl class="ctrlUnit">
			<dt><label for="ctrl_processor">{xen:phrase nixfifty_giftupgrades_payment_processor}:</label></dt>
			<dd>
				<select name="processor_id" class="textCtrl" id="ctrl_processor">
					<xen:foreach loop="$processors" key="$processorId" value="$processor">
						<option value="{$processorId}">{$processor.title}</option>
					</xen:foreach>
				</select>
			</dd>
		</dl>
	</xen:if>

	<xen:if is="{$visitor.user_id}">
		<dl class="ctrlUnit">
			<dt></dt>
			<dd>
				<ul>
					<li>
						<label><input type="checkbox" name="anonymous" value="1" id="ctrl_anonymous"/> {xen:phrase nixfifty_giftupgrades_send_gift_anonymously}</label>
						<p class="hint">{xen:phrase nixfifty_giftupgrades_send_gift_anonymously_desc}</p>
					</li>
				</ul>
			</dd>
		</dl>
	<xen:else />
		<dl class="ctrlUnit">
			<dt><label for="ctrl_email">{xen:phrase email}:</label></dt>
			<dd>
				<input type="text" name="email" id="ctrl_email" class="textCtrl" required="true" />
				<p class="explain">{xen:phrase nixfifty_giftupgrades_email_address_desc}</p>
			</dd>
		</dl>
	</xen:if>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd>
			<input type="submit" name="save" id="submit" value="{xen:phrase nixfifty_giftupgrades_gift}" accesskey="s" class="button primary" />
		</dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
  <template type="public" title="nf_content_gift_confirm" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:title>{xen:phrase nf_gift_upgrade_to_x, 'user={$giftUser.username}'}</xen:title>

<xen:navigation>
	<xen:breadcrumb source="$breadcrumbs" />
</xen:navigation>

<div class="xenForm formOverlay">
	<dl class="ctrlUnit">
		<dt>{xen:phrase upgrade}</dt>
		<dd>{$upgrade.title} ({$upgrade.costPhrase})</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase nixfifty_giftupgrades_payment_processor}</dt>
		<dd>{$processor}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase nixfifty_giftupgrades_send_gift_anonymously}:</dt>
		<dd>
			<xen:if is="{$anonymous}">
				{xen:phrase yes}
			<xen:else />
				{xen:phrase no}
			</xen:if>
		</dd>
	</dl>

	<xen:if hascontent="true">
		<xen:contentcheck>
			<xen:foreach loop="$upgrade.paymentForms" key="$processorId" value="$form">
				<dl id="{$processorId}" class="ctrlUnit submitUnit">
					<dt></dt>
					<dd>{xen:raw $form}</dd>
				</dl>
			</xen:foreach>
		</xen:contentcheck>
	</xen:if>
</div>]]></template>
  <template type="public" title="nf_content_gifts" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:title>{xen:phrase nf_members_who_gifted_this_content}</xen:title>

<xen:navigation>
	<xen:breadcrumb source="$breadcrumbs" />
</xen:navigation>

<xen:container var="$head.noindex"><meta name="robots" content="noindex" /></xen:container>

<div class="section">
	<ol class="overlayScroll">
		<xen:foreach loop="$gifts" value="$gift">
			<xen:include template="member_list_item">
				<xen:set var="$extraTemplate"><xen:datetime time="$gift.gift_date" /></xen:set>
				<xen:map from="$gift" to="$user" />
			</xen:include>
		</xen:foreach>
	</ol>

	<div class="sectionFooter ">
		<span class="note">{xen:phrase nf_some_gifters_may_be_anonymous}</span>

		<a class="button primary overlayOnly OverlayCloser">{xen:phrase close}</a>
		<xen:if is="{$hasMore}">
			<a class="button OverlayCloser OverlayTrigger" href="{$moreLink}">{xen:phrase more}...</a>
		</xen:if>
	</div>
</div>]]></template>
  <template type="public" title="nf_giftupgrades.css" version_id="2000070" version_string="2.0.0"><![CDATA[/* gifted messages */
.nf_gifted
{
	{xen:property nf_gifted}
}]]></template>
  <template type="public" title="nf_giftupgrades_account_upgrades_gift" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('nf_giftupgrades_gift_x_to_a_user', {'upgrade': $upgrade.title}) }}</xf:title>

<div class="blocks">
	<xf:form action="{{ link('purchase', $upgrade, {'user_upgrade_id': $upgrade.user_upgrade_id}) }}" class="block" ajax="true">
		<div class="block-container">
			<div class="block-body">
				<xf:formrow label="{{ phrase('upgrade') }}">{$upgrade.title} ({{ $upgrade.getCostPhrase() }})</xf:formrow>

				<xf:textboxrow name="username" ac="single" autocomplete="off" required="true"
							   maxlength="{{ max_length($xf.visitor, 'username') }}"
							   placeholder="{{ phrase('name...') }}"
							   autofocus="on" label="{{ phrase('nf_giftupgrades_gift_to') }}"/>

				<xf:checkboxrow explain="{{ phrase('nf_giftupgrades_send_gift_anonymously_explain') }}">
					<xf:option name="anonymous">
						<xf:label>{{ phrase('nf_giftupgrades_send_gift_anonymously') }}</xf:label>
					</xf:option>
				</xf:checkboxrow>

				<xf:submitrow submit="{{ phrase('continue...') }}" />
			</div>
		</div>

		<xf:hiddenval name="payment_profile_id">{$profileId}</xf:hiddenval>
		<xf:hiddenval name="gift">1</xf:hiddenval>
		<xf:hiddenval name="confirmed">1</xf:hiddenval>
	</xf:form>
</div>]]></template>
  <template type="public" title="nf_giftupgrades_event_gift_controls" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$event.canGift} or {$event.nf_gifts}">
	<span class="item">
		<xen:if is="{$event.canGift}">
			<a href="{xen:link calendar/gift, $event}" class="OverlayTrigger control">{xen:phrase nixfifty_giftupgrades_gift}</a>

			<xen:if is="{$event.nf_gifts}">
				(<a href="{xen:link calendar/gifts, $event}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$event.nf_gifts}'}</a>)
			</xen:if>
		<xen:elseif is="{$event.nf_gifts}" />
			<a href="{xen:link calendar/gifts, $event}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$event.nf_gifts}'}</a>
		</xen:if>
	</span>
</xen:if>]]></template>
  <template type="public" title="nf_giftupgrades_media_gift_controls" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$media.canGift} or {$media.nf_gifts}">
	<span class="item">
		<xen:if is="{$media.canGift}">
			<a href="{xen:link xengallery/gift, $media}" class="OverlayTrigger control">{xen:phrase nixfifty_giftupgrades_gift}</a>

			<xen:if is="{$media.nf_gifts}">
				(<a href="{xen:link xengallery/gifts, $media}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$media.nf_gifts}'}</a>)
			</xen:if>
		<xen:elseif is="{$media.nf_gifts}" />
			<a href="{xen:link xengallery/gifts, $media}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$media.nf_gifts}'}</a>
		</xen:if>
	</span>
</xen:if>]]></template>
  <template type="public" title="nf_member_card_gift_controls" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$canGift}">
	<a href="{xen:link members/gift, $user}" class="OverlayTrigger">{xen:phrase nixfifty_giftupgrades_gift}</a>
</xen:if>]]></template>
  <template type="public" title="nf_member_view_gift_controls" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$canGift}">
	<li><a href="{xen:link members/gift, $user}" class="OverlayTrigger">{xen:phrase nixfifty_giftupgrades_gift}</a></li>
</xen:if>]]></template>
  <template type="public" title="nf_post_gift_controls" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$post.canGift} or {$post.nf_gifts}">
	<span class="item">
		<xen:if is="{$post.canGift}">
			<a href="{xen:link posts/gift, $post}" class="OverlayTrigger control">{xen:phrase nixfifty_giftupgrades_gift}</a>

			<xen:if is="{$post.nf_gifts}">
				(<a href="{xen:link posts/gifts, $post}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$post.nf_gifts}'}</a>)
			</xen:if>
		<xen:elseif is="{$post.nf_gifts}" />
			<a href="{xen:link posts/gifts, $post}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$post.nf_gifts}'}</a>
		</xen:if>
	</span>
</xen:if>]]></template>
  <template type="public" title="nf_profile_post_gift_controls" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:if is="{$profilePost.canGift} or {$profilePost.nf_gifts}">
	<span class="item">
		<xen:if is="{$profilePost.canGift}">
			<a href="{xen:link profile-posts/gift, $profilePost}" class="OverlayTrigger control">{xen:phrase nixfifty_giftupgrades_gift}</a>

			<xen:if is="{$profilePost.nf_gifts}">
				(<a href="{xen:link profile-posts/gifts, $profilePost}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$profilePost.nf_gifts}'}</a>)
			</xen:if>
		<xen:elseif is="{$profilePost.nf_gifts}" />
			<a href="{xen:link profile-posts/gifts, $profilePost}" class="OverlayTrigger">{xen:phrase nf_gifted_x_times, 'count={$profilePost.nf_gifts}'}</a>
		</xen:if>
	</span>
</xen:if>]]></template>
  <template type="public" title="nixfifty_account_upgrades_gift" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:title>{xen:phrase nixfifty_giftupgrades_gift_x_to_a_user, 'upgrade={$upgrade.title}'}</xen:title>
<xen:h1>{xen:phrase nixfifty_giftupgrades_gift_x_to_a_user, 'upgrade={$upgrade.title}'}</xen:h1>

<form name="giftForm" action="{$requestPaths.fullBasePath}{xen:link account/upgrades/gift-confirm}" method="post" class="xenForm formOverlay">

	<dl class="ctrlUnit">
		<dt>{xen:phrase upgrade}</dt>
		<dd>{$upgrade.title}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase cost}</dt>
		<dd>{$upgrade.costPhrase}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase nixfifty_giftupgrades_payment_processor}</dt>
		<dd>
			<xen:if is="{$processors}">
				<select name="processor_id" class="textCtrl" id="ctrl_processor_id">
					<xen:foreach loop="$processors" key="$processorId" value="$processor">
						<option value="{$processorId}">{$processor.title}</option>
					</xen:foreach>
				</select>
			<xen:else />
				{xen:phrase nixfifty_giftupgrades_paypal}
			</xen:if>
		</dd>
	</dl>

	<dl class="ctrlUnit findMember">
		<dt>
			<label for="ctrl_title_gift_to">{xen:phrase nixfifty_giftupgrades_gift_to}:</label>
			<dfn>{xen:phrase required}</dfn>
		</dt>
		<dd>
			<input type="search" name="username" placeholder="{xen:phrase user}" results="0" autofocus="on" class="textCtrl AutoComplete AcSingle" />
		</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt></dt>
		<dd><ul>
			<li><label><input type="checkbox" name="anonymous" value="1" id="ctrl_anonymous"/> {xen:phrase nixfifty_giftupgrades_send_gift_anonymously}</label>
				<p class="explain">{xen:phrase nixfifty_giftupgrades_send_gift_anonymously_desc}</p>
			</li>
		</ul></dd>
	</dl>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd>
			<input type="submit" name="save" id="submit" value="{xen:phrase nixfifty_giftupgrades_gift}" accesskey="s" class="button primary" />
		</dd>
	</dl>

	<input type="hidden" name="upgrade_id" value="{$upgrade.user_upgrade_id}" />
	<input type="hidden" name="_xfConfirm" value="1" />
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />

</form>]]></template>
  <template type="public" title="nixfifty_account_upgrades_gift_confirm" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:title>{xen:phrase nixfifty_giftupgrades_gift_x_to_a_user, 'upgrade={$upgrade.title}'}</xen:title>
<xen:h1>{xen:phrase nixfifty_giftupgrades_gift_x_to_a_user, 'upgrade={$upgrade.title}'}</xen:h1>

<div class="xenForm">

	<dl class="ctrlUnit">
		<dt>{xen:phrase upgrade}:</dt>
		<dd>{$upgrade.title}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase cost}:</dt>
		<dd>{$upgrade.costPhrase}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase nixfifty_giftupgrades_payment_processor}:</dt>
		<dd>{$selectedProcessor}</dd>
	</dl>

	<dl class="ctrlUnit findMember">
		<dt><label for="ctrl_title_gift_to">{xen:phrase nixfifty_giftupgrades_gift_to}:</label></dt>
		<dd>{$giftUser.username}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase nixfifty_giftupgrades_send_gift_anonymously}:</dt>
		<dd>{xen:if '{$anonymous}', 'Yes', 'No'}</dd>
	</dl>

</div>
<xen:if hascontent="true">
	<xen:contentcheck>
		<xen:foreach loop="$upgrade.paymentForm" key="$processorId" value="$form">
			<div id="{$processorId}" class="submitUnit" style="text-align: center; padding-right: 250px;">{xen:raw $form}</div>
		</xen:foreach>
	</xen:contentcheck>
</xen:if>]]></template>
  <template type="public" title="nixfifty_account_upgrades_gift_purchased" version_id="2000070" version_string="2.0.0"><![CDATA[<xen:foreach loop="$purchased" value="$upgrade">
	<li class="primaryContent upgrade">
		<div action="{$payPalUrl}" method="post" class="upgradeForm">
			<div class="cost">{$upgrade.costPhrase}</div>
			<a href="{xen:link full:account/upgrades/gift, '', 'upgrade_id={$upgrade.user_upgrade_id}'}" class="button OverlayTrigger">{xen:phrase nixfifty_giftupgrades_gift}</a>
		</div>

		<div class="upgradeMain">
			<h4 class="title">{$upgrade.title}</h4>
			<xen:if is="{$upgrade.description}">
				<div class="description">{xen:raw $upgrade.description}</div>
			</xen:if>
		</div>
	</li>
</xen:foreach>]]></template>
</templates>
