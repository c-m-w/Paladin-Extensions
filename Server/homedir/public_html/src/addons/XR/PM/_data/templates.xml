<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="xr_pm_category_delete" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:macro template="category_tree_macros" name="category_delete_form"
	arg-linkPrefix="product-manager/categories"
	arg-category="{$category}" />]]></template>
  <template type="admin" title="xr_pm_category_edit" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$category.isInsert()">
	<xf:title>{{ phrase('xr_pm_create_category') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xr_pm_edit_category:') }} {$category.title}</xf:title>
</xf:if>

<xf:pageaction if="$category.category_id">
	<xf:button href="{{ link('product-manager/categories/delete', $category) }}"
		icon="delete"
		data-xf-click="overlay" />
</xf:pageaction>

<xf:form action="{{ link('product-manager/categories/save', $category) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow name="title" value="{$category.title}"
				label="{{ phrase('title') }}" />

			<xf:textarearow name="description" value="{$category.description}" rows="2" autosize="true"
				label="{{ phrase('description') }}"
				hint="{{ phrase('you_may_use_html') }}" />

			<xf:macro template="category_tree_macros" name="parent_category_select_row"
				arg-category="{$category}"
				arg-categoryTree="{$categoryTree}" />

			<xf:macro template="display_order_macros" name="row"
				arg-value="{$category.display_order}" />
		</div>
		<xf:submitrow sticky="true" icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_category_list" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('categories') }}</xf:title>

<xf:macro template="category_tree_macros" name="page_action"
	arg-linkPrefix="product-manager/categories" />

<xf:macro template="category_tree_macros" name="category_list"
	arg-categoryTree="{$categoryTree}"
	arg-filterKey="xr-pm-categories"
	arg-linkPrefix="product-manager/categories"
	arg-idKey="category_id"
/>]]></template>
  <template type="admin" title="xr_pm_category_permission_edit" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('product-manager/categories/permissions', $record) }}">{{ phrase('permissions:') }} {$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="product-manager/categories/permissions"
	arg-saveParams="{$saveParams}" />
]]></template>
  <template type="admin" title="xr_pm_category_permission_list" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('permissions:') }} {$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="product-manager/categories/permissions" />
]]></template>
  <template type="admin" title="xr_pm_category_sort" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:js src="vendor/nestable/jquery.nestable.min.js" />
<xf:js src="xf/nestable.js" min="1" />
<xf:css src="public:nestable.less" />

<xf:title>{{ phrase('sort_categories') }}</xf:title>

<xf:form action="{{ link('product-manager/categories/sort') }}" class="block" ajax="true">
	<div class="block-container">
		<div class="block-body">
			<div class="nestable-container" data-xf-init="nestable">
				<xf:macro name="category_list" arg-children="{$categoryTree}" />
				<xf:hiddenval name="categories" value="" />
			</div>
		</div>
		<xf:submitrow icon="save" rowtype="simple" />
	</div>
</xf:form>

<xf:macro name="category_list" arg-children="!">
	<ol class="nestable-list">
		<xf:foreach loop="$children" key="$id" value="$child">
			<xf:macro name="category_list_entry" arg-category="{$child}" arg-children="{$child.children}" />
		</xf:foreach>
	</ol>
</xf:macro>

<xf:macro name="category_list_entry" arg-category="!" arg-children="!">
	<li class="nestable-item" data-id="{$category.id}">
		<div class="nestable-handle"><i class="fa fa-bars" aria-hidden="true"></i></div>
		<div class="nestable-content">{$category.record.title}</div>
		<xf:if is="$category.children is not empty">
			<xf:macro name="category_list" arg-children="{$category.children}" />
		</xf:if>
	</li>
</xf:macro>]]></template>
  <template type="admin" title="xr_pm_coupon_delete" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('product-manager/products/coupons/delete', $coupon) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{{ link('product-manager/products/coupons/edit', $coupon) }}">{$coupon.coupon_title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_coupon_edit" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$coupon.isInsert()">
	<xf:title>{{ phrase('xr_pm_add_coupon') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xr_pm_edit_coupon:') }} {$coupon.coupon_title}</xf:title>
</xf:if>

<xf:pageaction if="$coupon.isUpdate()">
	<xf:button href="{{ link('product-manager/products/coupons/delete', $coupon) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('product-manager/products/coupons/save', $coupon) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow label="{{ phrase('xr_pm_coupon_title') }}" name="coupon_title" value="{$coupon.coupon_title}" />

			<xf:textarearow label="{{ phrase('xr_pm_coupon_description') }}" name="coupon_description" value="{$coupon.coupon_description}" />

			<xf:textboxrow label="{{ phrase('xr_pm_coupon_code') }}" name="coupon_code" value="{$coupon.coupon_code}" />

			<hr class="formRowSep" />

			<xf:radiorow label="{{ phrase('xr_pm_coupon_applies_to') }}" name="coupon_type" value="{$coupon.coupon_type}">
				<xf:option label="{{ phrase('xr_pm_entire_purchase') }}" value="purchase" />
				<xf:option label="{{ phrase('xr_pm_purchasing_specific_products') }}" value="product" data-hide="on">
					<xf:checkbox name="coupon_product_ids" value="{$coupon.coupon_product_ids}">
						<xf:options source="$products" />
					</xf:checkbox>
				</xf:option>
				<xf:option label="{{ phrase('xr_pm_purchasing_specific_extras') }}" value="extra" data-hide="on">
					<xf:checkbox name="coupon_extra_ids" value="{$coupon.coupon_extra_ids}">
						<xf:options source="$extras" />
					</xf:checkbox>
				</xf:option>
				<xf:option label="{{ phrase('xr_pm_renewals') }}" value="renewal" data-hide="on">
					<xf:radio name="renewal_coupon_type">
						<xf:option label="{{ phrase('xr_pm_any_product') }}" value="any" selected="!$coupon.coupon_product_ids" />
						<xf:option label="{{ phrase('xr_pm_specific_products') }}" value="product" selected="$coupon.coupon_product_ids" data-hide="on">
							<xf:checkbox name="coupon_product_ids" value="{$coupon.coupon_product_ids}">
								<xf:options source="$products" />
							</xf:checkbox>
						</xf:option>
					</xf:radio>
				</xf:option>
			</xf:radiorow>

			<xf:macro template="helper_user_group_edit" name="checkboxes"
				arg-label="{{ phrase('xr_pm_coupon_usable_by') }}" arg-id="coupon_usable_by"
				arg-selectedUserGroups="{{ $coupon.coupon_id ? $coupon.coupon_usable_by : [-1] }}" />

			<xf:macro template="helper_user_group_edit" name="checkboxes"
				arg-label="{{ phrase('xr_pm_coupon_automatically_assigned_to') }}" arg-id="coupon_auto_assign_to"
				arg-selectedUserGroups="{{ $coupon.coupon_id ? $coupon.coupon_auto_assign_to : [] }}" />

			<xf:formrow label="{{ phrase('xr_pm_coupon_discount') }}" rowtype="input">
				<div class="inputGroup">
					<xf:numberbox name="coupon_reduction" value="{$coupon.coupon_reduction}" min="1" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="coupon_unit" value="{$coupon.coupon_unit}" class="input--autoSize">
						<xf:option value="currency">{{ phrase('xr_pm_monetary_discount') }}</xf:option>
						<xf:option value="percent">{{ phrase('xr_pm_percent_discount') }}</xf:option>
					</xf:select>
				</div>
				<div class="formRow-explain">{{ phrase('xr_pm_monetary_discount_is_based_on_selected_currency_for_purchased_product') }}</div>
			</xf:formrow>

			<xf:checkboxrow label="{{ phrase('options') }}">
				<xf:option name="active" value="1" selected="$coupon.active">{{ phrase('xr_pm_coupon_is_active') }}</xf:option>
				<xf:option name="coupon_set_limit" value="1" selected="$coupon.coupon_set_limit">
					<xf:label>{{ phrase('xr_pm_limit_coupon_uses') }}</xf:label>
					<xf:dependent>
						<xf:numberbox name="coupon_limit" value="{$coupon.coupon_limit}" min="0" />
					</xf:dependent>
				</xf:option>
				<xf:option selected="$coupon.coupon_valid_to > 0">
					<xf:label>{{ phrase('xr_pm_coupon_expires') }}</xf:label>
					<xf:dependent>
						<xf:dateinput name="coupon_valid_to" value="{{ $coupon.coupon_valid_to ? date($coupon.coupon_valid_to, 'picker') : '' }}" />
					</xf:dependent>
				</xf:option>
			</xf:checkboxrow>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_coupon_list" version_id="2000037" version_string="2.0.0 Beta 7"><![CDATA[<xf:title>{{ phrase('xr_pm_product_coupons') }}</xf:title>

<xf:pageaction>
	<xf:button icon="add" href="{{ link('product-manager/products/coupons/add') }}">
		{{ phrase('xr_pm_add_coupon') }}
	</xf:button>
</xf:pageaction>

<xf:if is="$coupons is not empty">
	<xf:form action="{{ link('product-manager/products/coupons/toggle') }}" class="block" ajax="true">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<tbody class="dataList-rowGroup">
					<xf:foreach loop="$coupons" value="$coupon">
						<xf:datarow
							label="{$coupon.coupon_title}"
							href="{{ link('product-manager/products/coupons/edit', $coupon) }}"
							delete="{{ link('product-manager/products/coupons/delete', $coupon) }}">
							<xf:cell class="dataList-cell--separated dataList-cell--min dataList-cell--alt">{$coupon.coupon_code}</xf:cell>
							<xf:toggle name="active[{$coupon.coupon_id}]" selected="$coupon.active"
								class="dataList-cell--separated" submit="true"
								tooltip="{{ phrase('enable_disable_x', {'title': $coupon.coupon_title}) }}" />
							<xf:explain>{$coupon.coupon_description}</xf:explain>
						</xf:datarow>
					</xf:foreach>
					</tbody>
				</xf:datalist>
			</div>
		</div>
	</xf:form>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xr_pm_edit_macros" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro name="upload_editor" arg-label="" arg-buttonLabel="!" arg-attachmentData="!" arg-hiddenName="!" arg-isInsert="{{ true }}" arg-iconUrl="" arg-title="" arg-attachment="!" arg-uploaderExtra="" arg-extra="">
	<xf:if is="$isInsert">
		<xf:macro name="uploader"
			arg-label="{$label}"
			arg-buttonLabel="{$buttonLabel}"
			arg-attachmentData="{$attachmentData}"
			arg-hiddenName="{$hiddenName}"
			arg-extra="{$uploaderExtra}"
		/>
	<xf:else />
		<xf:macro name="displayer"
			arg-label="{$label}"
			arg-iconUrl="{$iconUrl}"
			arg-title="{$title}"
			arg-attachment="{$attachment}"
			arg-extra="{$extra}"
		/>
	</xf:if>
</xf:macro>

<xf:macro name="uploader" arg-label="" arg-buttonLabel="!" arg-attachmentData="!" arg-hiddenName="!" arg-extra="" arg-row="{{ true }}">
	<xf:set var="$inner">
		<xf:macro template="public:xr_pm_attach_upload_macros" name="upload_block"
			arg-attachmentData="{$attachmentData}"
			arg-hiddenName="{$hiddenName}"
			arg-label="{$buttonLabel}"
		/>
		<xf:if is="$extra">
			{$extra|raw}
		</xf:if>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow label="{$label}" rowtype="button">
			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>

<xf:macro name="displayer" arg-label="" arg-iconUrl="" arg-title="" arg-attachment="!" arg-extra="" arg-row="{{ true }}">
	<xf:set var="$inner">
		<div class="contentRow contentRow--alignMiddle">
			<div class="contentRow-figure contentRow-figure--fixedSmall">
				<xf:if is="$iconUrl">
					<img src="{$iconUrl}" alt="{$title}" />
				<xf:else />
					<a style="pointer-events: none"><i class="fa fa-file-o fa-3x" aria-hidden="true"></i></a>
				</xf:if>
			</div>
			<div class="contentRow-main">
				<a href="{{ link('attachments/view', $attachment) }}">{$attachment.filename}</a>
				<xf:if is="$extra">
					{$extra|raw}
				</xf:if>
			</div>
		</div>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow label="{$label}">
			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>]]></template>
  <template type="admin" title="xr_pm_extra_delete" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('product-manager/products/extras/delete', $extra) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{{ link('product-manager/products/extras/edit', $extra) }}">{$extra.extra_title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_extra_edit" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$extra.isInsert()">
	<xf:title>{{ phrase('xr_pm_add_extra') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xr_pm_edit_extra:') }} {$extra.extra_title}</xf:title>
</xf:if>

<xf:pageaction if="$extra.isUpdate()">
	<xf:button href="{{ link('product-manager/products/extras/delete', $extra) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('product-manager/products/extras/save', $extra) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow label="{{ phrase('xr_pm_extra_title') }}" name="extra_title" value="{$extra.extra_title}" />

			<xf:textarearow label="{{ phrase('xr_pm_extra_description') }}" name="extra_description" value="{$extra.extra_description_}">
				<xf:explain>{{ phrase('xr_pm_you_may_use_x_placeholder') }}</xf:explain>
			</xf:textarearow>

			<hr class="formRowSep" />

			<xf:textboxrow label="{{ phrase('xr_pm_purchase_price') }}" name="extra_price" value="{$extra.extra_price}" class="input--autoSize">
				<xf:explain>{{ phrase('xr_pm_currency_used_for_price_given_here_will_be_inherited_from_purchase') }}</xf:explain>
			</xf:textboxrow>

			<xf:textboxrow label="{{ phrase('xr_pm_renewal_price') }}" name="extra_renew_price" value="{$extra.extra_renew_price}" class="input--autoSize">
				<xf:explain>{{ phrase('xr_pm_extra_renew_price_note') }}</xf:explain>
			</xf:textboxrow>

			<hr class="formRowSep" />

			<xf:radiorow name="extra_reward" value="{$extra.extra_reward}"
				label="{{ phrase('xr_pm_purchase_reward') }}">
				<xf:option value="user_group" label="{{ phrase('xr_pm_user_group_promotion') }}">
					<xf:radio name="extra_user_group_id" listclass="listColumns" value="{$extra.extra_user_group_id}">
						<xf:options source="$userGroups" />
						<xf:if is="$extra.isInsert()">
							<xf:option selected="$extra.isInsert()" label="<b>{{ phrase('xr_pm_create_new_group') }}</b>" value="__new" />
						</xf:if>
					</xf:radio>
					<xf:html>
						<div class="formRow-explain">
							{{ phrase('xr_pm_puts_user_in_selected_groups_while_support_duration_is_active') }}<xf:if is="$extra.isInsert()"> {{ phrase('xr_pm_create_new_group_extra_explain') }}</xf:if>
						</div>
					</xf:html>
				</xf:option>
				<xf:option value="file" label="{{ phrase('xr_pm_downloadable_file') }}">
					<xf:dependent>
						<xf:if is="$extra.isUpdate() && $extra.Extra">
							<div class="inputChoices-spacer">{{ phrase('xr_pm_existing_file:') }}</div>
							<xf:macro template="public:xr_pm_attachment_macros" name="displayer"
								arg-label="{{ phrase('xr_pm_existing_file') }}"
								arg-attachment="{$extra.Extra}"
								arg-row="{{ false }}"
							/>
						</xf:if>

						<div class="inputChoices-spacer">{{ phrase('xr_pm_upload_new_file:') }}</div>
						<xf:macro template="public:xr_pm_attachment_macros" name="uploader"
							arg-buttonLabel="Upload new file"
							arg-attachmentData="{$extraAttachData}"
							arg-hiddenName="extra_attach_hash"
							arg-row="{{ false }}"
						/>
					</xf:dependent>
				</xf:option>
				<xf:option value="instructions" label="{{ phrase('xr_pm_written_instructions') }}">
					<xf:dependent>
						<xf:editor name="instructions" value="{$extra.instructions}"
							data-min-height="100"
						/>
						<div class="formRow-explain">
							{{ phrase('xr_pm_you_may_use_x_placeholder') }}
						</div>
					</xf:dependent>
				</xf:option>
			</xf:radiorow>

			<xf:if is="$products">
				<hr class="formRowSep" />

				<xf:checkboxrow label="{{ phrase('xr_pm_purchasable_with_products') }}" value="{$productIds}" name="product_ids">
					<xf:options source="{$products}" />
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_extra_list" version_id="2000037" version_string="2.0.0 Beta 7"><![CDATA[<xf:title>{{ phrase('xr_pm_product_extras') }}</xf:title>

<xf:pageaction>
	<xf:button icon="add" href="{{ link('product-manager/products/extras/add') }}">
		{{ phrase('xr_pm_add_extra') }}
	</xf:button>
</xf:pageaction>

<xf:if is="$extras is not empty">
	<div class="block">
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<tbody class="dataList-rowGroup">
					<xf:foreach loop="$extras" value="$extra">
						<xf:datarow
							label="{$extra.extra_title}"
							href="{{ link('product-manager/products/extras/edit', $extra) }}"
							delete="{{ link('product-manager/products/extras/delete', $extra) }}">
							<xf:explain>{$extra.extra_description}</xf:explain>
						</xf:datarow>
					</xf:foreach>
					</tbody>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xr_pm_option_template_xr_pm_default_terms" version_id="2000034" version_string="2.0.0 Beta 4"><![CDATA[<xf:editorrow name="{$inputName}" value="{$option.option_value}"
	label="{$option.title}"
	hint="{$hintHtml}"
	explain="{$explainHtml}"
	html="{$listedHtml}"
	data-min-height="100"
/>]]></template>
  <template type="admin" title="xr_pm_permission_category_edit" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$userGroup">
	<xf:title>{$userGroup.title}</xf:title>
<xf:else />
	<xf:title>{$user.username}</xf:title>
</xf:if>

<xf:breadcrumb href="{{ link('permissions/product-manager-categories', $record) }}">{$record.title}</xf:breadcrumb>

<xf:macro template="permission_category_macros" name="edit"
	arg-category="{$record}"
	arg-permissionData="{$permissionData}"
	arg-typeEntries="{$typeEntries}"
	arg-routeBase="permissions/product-manager-categories"
	arg-saveParams="{$saveParams}" />
]]></template>
  <template type="admin" title="xr_pm_permission_category_list" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$record.title}</xf:title>

<xf:macro template="permission_category_macros" name="list"
	arg-category="{$record}"
	arg-isPrivate="{$isPrivate}"
	arg-userGroups="{$userGroups}"
	arg-users="{$users}"
	arg-entries="{$entries}"
	arg-routeBase="permissions/product-manager-categories" />
]]></template>
  <template type="admin" title="xr_pm_permission_category_overview" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_product_category_permissions') }}</xf:title>

<xf:if is="$categoryTree.countChildren()">
	<div class="block">
		<div class="block-outer">
			<xf:macro template="filter_macros" name="quick_filter" arg-key="product-manager-categories" arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
						<xf:set var="$category" value="{$treeEntry.record}" />
						<xf:datarow rowclass="{{ {$customPermissions.{$category.category_id}} ? 'dataList-row--custom' : '' }}">
							<xf:cell class="dataList-cell--link dataList-cell--main" hash="{$category.category_id}">
								<a href="{{ link('permissions/product-manager-categories', $category) }}">
									<div class="u-depth{$treeEntry.depth}">
										<div class="dataList-mainRow">{$category.title}</div>
									</div>
								</a>
							</xf:cell>
							<xf:action href="{{ link('product-manager/categories/edit', $category) }}">{{ phrase('edit') }}</xf:action>
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
		</div>
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xr_pm_product_add_version" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:title>{{ phrase('xr_pm_add_version:') }} {$product.product_title}</xf:title>

<xf:form action="{{ link('product-manager/products/add-version', $product) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-blody">
			<xf:textboxrow label="{{ phrase('xr_pm_version_string') }}" name="version_string" value=""
				placeholder="{{ phrase('xr_pm_current_version_x', {'version_string': $product.Version.version_string}) }}" />

			<xf:editorrow name="version_details" value=""
				label="{{ phrase('xr_pm_version_details') }}"
				data-min-height="100"
			/>

			<xf:formrow rowtype="input" label="{{ phrase('xr_pm_change_log_items') }}">
				<ul class="inputList">
					<li data-xf-init="field-adder" data-increment-format="changelog[{counter}]">
						<xf:textbox name="changelog[0]" />
					</li>
				</ul>
				<div class="formRow-explain">
					{{ phrase('xr_pm_add_change_change_log_items_to_above_fields') }}
				</div>
			</xf:formrow>

			<xf:checkboxrow>
				<xf:option label="{{ phrase('xr_pm_version_is_unsupported') }}" name="is_unsupported">
					<xf:hint>{{ phrase('xr_pm_version_is_unsupported_explain') }}</xf:hint>
				</xf:option>
			</xf:checkboxrow>

			<xf:checkboxrow label="{{ phrase('xr_pm_send_notifications') }}" name="send_notifications[]" listclass="listColumns listColumns--collapsed">
				<xf:option label="{{ phrase('email') }}" value="email" selected="true" />
				<xf:option label="{{ phrase('xr_pm_alert') }}" value="alert" selected="true" />
				<xf:explain>{{ phrase('xr_pm_send_notifications_explain') }}</xf:explain>
			</xf:checkboxrow>

			<xf:selectrow label="{{ phrase('xr_pm_post_update_to_forum') }}" name="node_id">
				<xf:foreach loop="$forums" value="$forum">
					<xf:option value="{$forum.value}" disabled="{$forum.disabled}">{$forum.label}</xf:option>
				</xf:foreach>
				<xf:explain>{{ phrase('xr_pm_post_update_to_forum_explain') }}</xf:explain>
			</xf:selectrow>

			<hr class="formRowSep" />

			<xf:formrow label="" rowtype="button">
				<xf:macro template="public:xr_pm_attach_upload_macros" name="upload_block"
					arg-attachmentData="{$productAttachData}"
					arg-hiddenName="product_attach_hash"
					arg-label="{{ phrase('xr_pm_upload_product') }}"
				/>
			</xf:formrow>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_product_delete" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('product-manager/products/delete', $product) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{{ link('product-manager/products/edit', $product) }}">{$product.product_title}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_product_edit" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:if is="$product.isInsert()">
	<xf:title>{{ phrase('xr_pm_add_product') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xr_pm_edit_product:') }} {$product.product_title}</xf:title>
</xf:if>

<xf:pageaction if="$product.isUpdate()">
	<xf:button href="{{ link('product-manager/products/delete', $product) }}" icon="delete" overlay="true" />
</xf:pageaction>

<xf:form action="{{ link('product-manager/products/save', $product) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow label="{{ phrase('category') }}" name="product[category_id]" value="{$product.category_id}">
				<xf:foreach loop="$categories" value="$category">
					<xf:option value="{$category.value}" label="{$category.label}" />
				</xf:foreach>
			</xf:selectrow>

			<xf:formrow rowtype="input" label="{{ $product.isInsert() ? phrase('xr_pm_title_and_initial_version') : phrase('xr_pm_title_and_current_version') }}">
				<div class="inputGroup inputGroup--auto">
					<xf:textbox name="product[product_title]" value="{$product.product_title}"
						maxlength="{{ max_length($product, 'product_title') }}" size="75"
					/>

					<span class="inputGroup-splitter"></span>

					<xf:textbox name="version[version_string]" value="{$version.version_string}"
						maxlength="{{ max_length($version, 'version_string') }}" size="25"
					/>
				</div>
			</xf:formrow>

			<xf:textboxrow name="product[product_tag_line]" value="{$product.product_tag_line}"
				label="{{ phrase('xr_pm_tag_line') }}"
				maxlength="{{ max_length($product, 'product_tag_line') }}"
				explain="{{ phrase('xr_pm_tag_explain') }}"
			/>

			<div data-xf-init="attachment-manager">
				<xf:editorrow name="product[product_details]" value="{$product.product_details}"
					label="{{ phrase('xr_pm_product_details') }}"
					attachments="{$imageAttachData.attachments}"
				/>

				<xf:formrow rowtype="button">
					<xf:macro template="public:xr_pm_attach_upload_macros" name="upload_block"
						arg-initAttachmentManager="{{ false }}"
						arg-attachmentData="{$imageAttachData}"
						arg-hiddenName="image_attach_hash"
						arg-label="{{ phrase('xr_pm_upload_images') }}"
					/>
				</xf:formrow>
			</div>

			<xf:formrow rowtype="input"
				label="{{ phrase('xr_pm_main_features') }}"
				explain="{{ phrase('xr_pm_main_features_explain') }}"
			>
				<ul class="inputList">
					<xf:foreach loop="$product.features" key="$counter" value="$feature">
						<li><xf:textbox name="product[features][{$counter}]" value="{$feature}" /></li>
					</xf:foreach>

					<li data-xf-init="field-adder" data-increment-format="product[features][{counter}]">
						<xf:textbox name="product[features][{{ count($product.features) }}]" />
					</li>
				</ul>
			</xf:formrow>

			<xf:set var="$productExtra">
				<div class="contentRow-minor contentRow-spaced">
					<xf:button icon="edit"
						href="{{ link('product-manager/products/versions/edit', $product.Version) }}"
						class="button--link button--small"
						data-xf-click="overlay" />
				</div>
			</xf:set>
			<xf:macro template="public:xr_pm_attachment_macros" name="upload_editor"
				arg-isInsert="{$product.isInsert()}"
				arg-label="{{ phrase('xr_pm_product') }}"
				arg-buttonLabel="{{ phrase('xr_pm_upload_product') }}"
				arg-attachmentData="{$productAttachData}"
				arg-hiddenName="product_attach_hash"
				arg-attachment="{$version.Version}"
				arg-extra="{$productExtra}"
			/>

			<xf:set var="$thumbnailExtra">
				<div class="contentRow-minor contentRow-spaced">
					<xf:button icon="edit"
						href="{{ link('product-manager/products/edit-thumbnail', $product) }}"
						class="button--link button--small"
						data-xf-click="overlay" />
				</div>
			</xf:set>
			<xf:macro template="public:xr_pm_attachment_macros" name="upload_editor"
				arg-isInsert="{$product.isInsert()}"
				arg-label="{{ phrase('thumbnail') }}"
				arg-buttonLabel="{{ phrase('xr_pm_upload_thumbnail') }}"
				arg-attachmentData="{$thumbAttachData}"
				arg-hiddenName="thumb_attach_hash"
				arg-iconUrl="{{ $product.has_thumbnail ? $product.thumbnail_url : '' }}"
				arg-title="{$product.product_title}"
				arg-attachment="{$product.Thumbnail}"
				arg-extra="{$thumbnailExtra}"
			/>

			<hr class="formRowSep" />

			<xf:formrow rowtype="input" label="{{ phrase('xr_pm_product_currency') }}">
				<xf:macro template="public:currency_macros" name="currency_list"
					arg-value="{{ $product.currency ?: 'USD' }}"
					arg-name="product[currency]"
					arg-class="input--autoSize" />
				<div class="formRow-explain">
					{{ phrase('xr_pm_this_currency_will_be_used_for_all_price_formatting_and_payments_related_to_product') }}
					{{ phrase('cost_currency_explain') }}
				</div>
			</xf:formrow>

			<xf:textboxrow label="{{ phrase('xr_pm_purchase_price') }}" name="product[price]" value="{$product.price}" class="input--autoSize" />

			<xf:textboxrow label="{{ phrase('xr_pm_renewal_price') }}" name="product[renew_price]" value="{$product.renew_price}" class="input--autoSize">
				<xf:explain>{{ phrase('xr_pm_this_is_cost_for_renewing_purchase_after_initial_support') }}</xf:explain>
			</xf:textboxrow>

			<xf:formrow rowtype="input"
				label="{{ phrase('xr_pm_initial_support_duration') }}">

				<div class="inputGroup">
					<xf:numberbox name="product[duration]" value="{$product.duration}" min="0" max="255" />
					<span class="inputGroup-splitter"></span>
					<xf:select name="product[duration_unit]" value="{$product.duration_unit}" class="input--inline">
						<xf:option value="days">{{ phrase('days') }}</xf:option>
						<xf:option value="months">{{ phrase('months') }}</xf:option>
						<xf:option value="years">{{ phrase('years') }}</xf:option>
					</xf:select>
				</div>
			</xf:formrow>

			<xf:checkboxrow value="{$product.allow_early_extension}" label="">
				<xf:option name="product[allow_early_extension]" value="1" label="{{ phrase('xr_pm_allow_early_extension') }}" />
				<xf:explain>{{ phrase('xr_pm_allow_early_extension_explain') }}</xf:explain>
			</xf:checkboxrow>

			<xf:checkboxrow name="product[payment_profile_ids]" value="{$product.payment_profile_ids}"
				label="{{ phrase('payment_profile') }}">

				<xf:foreach loop="$profiles" key="$profileId" value="$profile">
					<xf:option value="{$profileId}" label="{{ $profile.Provider.title !== $profile.title ? $profile.Provider.title . ' - ' . $profile.title : $profile.Provider.title }}" />
				</xf:foreach>
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:checkboxrow name="product[user_group_ids]" value="{$product.user_group_ids}" listclass="listColumns"
				label="{{ phrase('xr_pm_licensed_user_groups') }}">
				<xf:options source="$userGroups" />
				<xf:if is="$product.isInsert()">
					<xf:option label="<b>{{ phrase('xr_pm_create_new_group') }}</b>" value="__new" />
				</xf:if>
				<xf:explain>{{ phrase('xr_pm_puts_user_in_selected_groups_while_support_duration_is_active') }}<xf:if is="$product.isInsert()"> {{ phrase('xr_pm_create_new_group_explain') }}</xf:if></xf:explain>
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:if is="$extras is not empty">
				<xf:checkboxrow label="{{ phrase('xr_pm_available_extras') }}" name="product[optional_extras]" value="{$product.optional_extras}">
					<xf:foreach loop="$extras" key="$extraId" value="$extra">
						<xf:option value="{$extraId}">
							<xf:label>{$extra.extra_title}</xf:label>
							<xf:hint>{$extra.extra_description}</xf:hint>
						</xf:option>
					</xf:foreach>
				</xf:checkboxrow>

				<hr class="formRowSep" />
			</xf:if>

			<xf:editorrow label="{{ phrase('xr_pm_terms_and_conditions') }}"
				name="product[terms_conditions]" value="{$product.terms_conditions}"
				data-min-height="100"
				explain="{{ phrase('xr_pm_terms_and_conditions_explain') }}"
			/>

			<xf:if contentcheck="true">
				<xf:contentcheck>
					<xf:macro template="public:custom_fields_macros" name="custom_fields_edit"
						arg-type="xr_pm_products"
						arg-set="{$product.custom_fields}" />
				</xf:contentcheck>

				<hr class="formRowSep" />
			</xf:if>

			<xf:checkboxrow>
				<xf:option name="product[confirm_license]" selected="{$product.confirm_license}" label="{{ phrase('xr_pm_agree_to_terms_and_conditions_before_download') }}" />
				<xf:explain>{{ phrase('xr_pm_confirm_license_explain', {'link': link('options/groups/xrpm/')}) }}</xf:explain>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="product[requires_activation]" selected="{$product.requires_activation}" label="{{ phrase('xr_pm_requires_activation_before_download') }}" />
				<xf:explain>{{ phrase('xr_pm_requires_activation_explain') }}</xf:explain>
			</xf:checkboxrow>

			<xf:checkboxrow>
				<xf:option name="product[active]" selected="{$product.active}" label="{{ phrase('xr_pm_product_is_active') }}" />
				<xf:explain>{{ phrase('xr_pm_products_which_no_longer_active_can_no_longer_be_purchased') }}</xf:explain>
			</xf:checkboxrow>
		</div>

		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_product_edit_thumbnail" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_edit_thumbnail:') }} {$product.product_title}</xf:title>

<xf:form action="{{ link('product-manager/products/edit-thumbnail', $product) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-blody">
			<xf:formrow label="{{ phrase('thumbnail') }}">
				<div class="contentRow contentRow--alignMiddle">
					<div class="contentRow-figure contentRow-figure--fixedSmall">
						<xf:if is="$product.has_thumbnail">
							<img src="{$product.thumbnail_url}" alt="{$product.product_title}" />
						<xf:else />
							<a style="pointer-events: none"><i class="fa fa-file-o fa-3x" aria-hidden="true"></i></a>
						</xf:if>
					</div>
					<div class="contentRow-main">
						<a href="{{ link('attachments/view', $product.Thumbnail) }}">{$product.Thumbnail.filename}</a>
					</div>
				</div>
			</xf:formrow>
			<xf:formrow label="" rowtype="button">
				<xf:macro template="public:xr_pm_attach_upload_macros" name="upload_block"
					arg-attachmentData="{$thumbAttachData}"
					arg-hiddenName="thumb_attach_hash"
					arg-label="{{ phrase('xr_pm_upload_thumbnail') }}"
				/>
			</xf:formrow>
		</div>
		<xf:submitrow icon="save"><xf:html>
			<xf:button type="submit" name="delete" icon="delete" />
		</xf:html></xf:submitrow>
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_product_field_delete" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:include template="base_custom_field_delete" />]]></template>
  <template type="admin" title="xr_pm_product_field_edit" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:include template="base_custom_field_edit">
	<xf:set var="$extraOptions">
		<xf:macro template="base_custom_field_macros" name="common_options"
			arg-field="{$field}" />
	</xf:set>
</xf:include>]]></template>
  <template type="admin" title="xr_pm_product_field_list" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:title>{{ phrase('xr_pm_product_fields') }}</xf:title>

<xf:include template="base_custom_field_list" />]]></template>
  <template type="admin" title="xr_pm_product_index" version_id="2000037" version_string="2.0.0 Beta 7"><![CDATA[<xf:title>{{ phrase('xr_pm_products') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('product-manager/products/add') }}" icon="add">{{ phrase('xr_pm_add_product') }}</xf:button>
</xf:pageaction>

<xf:form action="{{ link('product-manager/products/toggle') }}" class="block" ajax="true">
	<div class="block-container">
		<xf:if is="$products is not empty">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$products" value="$product">
						<xf:datarow>
							<xf:cell class="dataList-cell--min dataList-cell--image dataList-cell--imageMedium"
								href="{{ link('product-manager/products/edit', $product) }}">
								{{ xr_pm_thumbnail($product, null, 'xrpmThumbnail--dataList') }}
							</xf:cell>

							<xf:cell href="{{ link('product-manager/products/edit', $product) }}" class="dataList-cell--main">
								<div class="dataList-mainRow">{$product.product_title}</div>
								<div class="dataList-subRow">
									<ul class="listInline listInline--bullet">
										<li>{{ phrase('xr_pm_release_date:') }} <xf:date time="{$product.product_date}" /></li>
										<li>{{ phrase('xr_pm_last_update:') }} <xf:date time="{$product.last_update}" /></li>
									</ul>
								</div>
							</xf:cell>

							<xf:toggle name="active[{$product.product_id}]" selected="$product.active"
								class="dataList-cell--separated" submit="true"
								tooltip="{{ phrase('enable_disable_x', {'title': $product.product_title}) }}" />

							<xf:popup label="&#8226;&#8226;&#8226;">
								<div class="menu" data-menu="menu" aria-hidden="true" data-menu-builder="dataList">
									<div class="menu-content">
										<h3 class="menu-header">{{ phrase('more_options') }}</h3>
										<a href="{{ link('product-manager/products/add-version', $product) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('xr_pm_release_new_version') }}</a>
										<a href="{{ link('product-manager/products/edit-thumbnail', $product) }}" class="menu-linkRow" data-xf-click="overlay">{{ phrase('xr_pm_add_edit_thumbnail') }}</a>
									</div>
								</div>
							</xf:popup>

							<xf:delete href="{{ link('product-manager/products/delete', $product) }}" />
						</xf:datarow>
					</xf:foreach>
				</xf:datalist>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($products, $total) }}</span>
			</div>
		<xf:else />
			<div class="block-body block-row">{{ phrase('no_results_found') }}</div>
		</xf:if>
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_product_manager" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_product_manager') }}</xf:title>

<xf:macro template="section_nav_macros" name="section_nav" arg-section="xr_pm" />]]></template>
  <template type="admin" title="xr_pm_purchase_edit" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:if is="$purchase.isInsert()">
	<xf:title>{{ phrase('xr_pm_add_purchase') }}</xf:title>
<xf:else />
	<xf:title>{{ phrase('xr_pm_edit_purchase:') }} {$purchase.Product.product_title} - {$purchase.purchase_key}</xf:title>
</xf:if>

<xf:pageaction if="$purchase.isTransferrable()">
	<xf:button href="{{ link('product-manager/purchases/transfer', $purchase) }}" data-xf-click="overlay">{{ phrase('xr_pm_transfer_purchase') }}</xf:button>
</xf:pageaction>

<xf:form action="{{ link('product-manager/purchases/save', $purchase) }}" ajax="true" class="block" data-force-flash-message="on">
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$purchase.isInsert()">
				<xf:selectrow name="product_id" label="{{ phrase('xr_pm_product') }}">
					<xf:option />
					<xf:options source="$products" />
				</xf:selectrow>

				<xf:textboxrow name="username" label="{{ phrase('xr_pm_purchaser') }}" ac="single">
					<xf:explain>{{ phrase('xr_pm_if_you_creating_this_purchase_for_yourself_you_may_leave_username_blank') }}</xf:explain>
				</xf:textboxrow>
			<xf:else />
				<xf:formrow label="{{ phrase('xr_pm_product') }}" rowtype="text">
					<a href="{{ link('product-manager/products/edit', $purchase.Product) }}">{$purchase.Product.product_title}</a>
				</xf:formrow>

				<xf:formrow label="{{ phrase('xr_pm_purchase_key') }}" rowtype="text">
					{$purchase.purchase_key}
					<div class="formRow-explain">
						{{ phrase('xr_pm_this_is_generated_key_which_uniquely_identifies_this_purchase') }}
					</div>
				</xf:formrow>

				<xf:if is="$purchase.old_cart_key">
					<xf:formrow label="{{ phrase('xr_pm_old_cart_key_legacy') }}" rowtype="text">
						{$purchase.old_cart_key}
						<div class="formRow-explain">
							{{ phrase('xr_pm_this_key_previously_uniquely_identified_specific_cart') }}
						</div>
					</xf:formrow>
				</xf:if>

				<xf:formrow label="{{ phrase('xr_pm_purchaser') }}" rowtype="text">
					<xf:username user="{$purchase.User}" defaultname="{$purchase.username}" />
				</xf:formrow>
			</xf:if>

			<xf:dateinputrow name="purchase_date" label="{{ phrase('xr_pm_purchase_date') }}"
				value="{{ $purchase.isInsert() ? date($xf.time, 'picker') : date($purchase.purchase_date, 'picker') }}"
			/>

			<xf:dateinputrow name="expiry_date" label="{{ phrase('xr_pm_expiry_date') }}"
				value="{{ $purchase.isInsert() ? date($xf.time + (86400 * 365), 'picker') : ($purchase.expiry_date ? date($purchase.expiry_date, 'picker') : '') }}"
			/>

			<xf:selectrow name="purchase_state" label="{{ phrase('xr_pm_purchase_state') }}" value="{$purchase.purchase_state}"
				data-xf-init="desc-loader"
				data-desc-url="{{ link('product-manager/purchases/get-state-explain') }}"
			>
				<xf:foreach loop="$purchaseStates" key="$key" value="$phrases">
					<xf:option value="{$key}" label="{$phrases.label}" title="{$phrases.explain}" />
				</xf:foreach>
				<xf:html>
					<div class="js-descTarget formRow-explain">{$purchaseStates.{$purchase.purchase_state}.explain}</div>
				</xf:html>
			</xf:selectrow>

			<xf:formrow label="{{ phrase('xr_pm_purchase_type') }}" rowtype="text">
				<xf:if is="$purchase.isInsert()">
					{$purchaseTypes.product}
					<xf:hiddenval name="purchase_type">product</xf:hiddenval>
				<xf:else />
					{$purchaseTypes.{$purchase.purchase_type}}
				</xf:if>
				<div class="formRow-explain">{{ phrase('xr_pm_indicates_type_of_purchase') }}</div>
			</xf:formrow>

			<xf:if is="$purchase.isUpdate() AND $parentPurchase">
				<xf:formrow label="{{ phrase('xr_pm_parent_purchase') }}" rowtype="text">
					<a href="{{ link('product-manager/purchases/edit', $parentPurchase) }}">
						{$parentPurchase.Product.product_title} - {$parentPurchase.purchase_key}
					</a>
					<div class="formRow-explain">{{ phrase('xr_pm_this_was_renewal_or_extra_purchase') }}</div>
				</xf:formrow>
			</xf:if>

			<xf:textboxrow label="{{ phrase('xr_pm_license_name') }}" name="license_name" value="{$purchase.license_name}" />

			<xf:textboxrow type="url" label="{{ phrase('xr_pm_license_url') }}" name="license_url" value="{$purchase.license_url}" />

			<xf:formrow rowtype="input" label="{{ phrase('xr_pm_purchase_currency') }}">
				<xf:macro template="public:currency_macros" name="currency_list"
					arg-value="{{ $purchase.purchase_currency ?: 'USD' }}"
					arg-name="purchase_currency"
					arg-class="input--autoSize"
				/>
				<div class="formRow-explain">
					{{ phrase('xr_pm_this_currency_will_be_used_for_all_price_formatting_and_payments_related_to_product') }}
				</div>
			</xf:formrow>

			<xf:numberboxrow label="{{ phrase('xr_pm_product_price') }}" name="product_price" value="{$purchase.product_price}" min="0" step="any" />

			<xf:numberboxrow label="{{ phrase('xr_pm_extras_price') }}" name="extras_price" value="{$purchase.extras_price}" min="0" step="any" />

			<xf:numberboxrow label="{{ phrase('xr_pm_discount_total') }}" name="discount_total" value="{$purchase.discount_total}" min="0" step="any" />

			<xf:numberboxrow label="{{ phrase('xr_pm_total_price') }}" name="total_price" value="{$purchase.total_price}" min="0" step="any">
				<xf:explain>{{ phrase('xr_pm_purchase_edit_price_explain') }}</xf:explain>
			</xf:numberboxrow>

			<xf:if is="$coupons is not empty">
				<xf:formrow label="{{ phrase('xr_pm_coupons_applied') }}" rowtype="text">
					<ul class="listInline">
						<xf:foreach loop="$coupons" value="$coupon">
							<li>
								<a href="{{ link('product-manager/products/coupons/edit', $coupon) }}" class="labelLink">
									<span class="label label--primary"
										data-xf-init="tooltip"
										title="{$coupon.coupon_description}">
										{$coupon.coupon_code} - {$coupon.coupon_title}
									</span>
								</a>
							</li>
						</xf:foreach>
					</ul>
				</xf:formrow>
			</xf:if>

			<xf:if is="$extras is not empty">
				<xf:checkboxrow name="extras" label="{{ phrase('xr_pm_associated_extras') }}" listclass="listColumns" value="{{ array_keys($purchase.extras) }}">
					<xf:options source="{$extras}" />
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:submitrow icon="save" sticky="true" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_purchase_list" version_id="2000037" version_string="2.0.0 Beta 7"><![CDATA[<xf:title>{{ phrase('xr_pm_customer_purchases') }}</xf:title>

<xf:pageaction>
	<xf:button icon="add" href="{{ link('product-manager/purchases/add') }}">{{ phrase('xr_pm_add_new_purchase') }}</xf:button>
</xf:pageaction>

<xf:if is="$purchases is not empty">
	<div class="block">
		<div class="block-outer">
			<div class="block-outer-main">
				<xf:button class="button--link menuTrigger" data-xf-click="menu" aria-expanded="false" aria-haspopup="true">
					{{ phrase('sort_by:') }} {{ $sortOptions.{$order} ?: phrase('xr_pm_purchase_date') }}
				</xf:button>

				<div class="menu" data-menu="menu" aria-hidden="true">
					<div class="menu-content">
						<h3 class="menu-header">{{ phrase('sort_by...') }}</h3>
						<xf:foreach loop="$sortOptions" key="$sortKey" value="$sortName">
							<a href="{{ link('product-manager/purchases', null, {'criteria': $criteria, 'order': $sortKey}) }}"
								class="menu-linkRow {{ $order == $sortKey ? 'is-selected' : '' }}">
								{$sortName}
							</a>
						</xf:foreach>
					</div>
				</div>
			</div>
			<xf:macro template="filter_macros" name="quick_filter" arg-key="xr_pm_purchases"
				arg-ajax="{{ link('product-manager/purchases', null, {'criteria': $criteria, 'order': $order, 'direction': $direction}) }}"
				arg-class="block-outer-opposite" />
		</div>
		<div class="block-container">
			<div class="block-body">
				<xf:datalist>
					<xf:foreach loop="$purchases" value="$purchase">
						<xf:datarow>
							<xf:cell class="dataList-cell--min dataList-cell--image dataList-cell--imageMedium"
								href="{{ link('product-manager/purchases/edit', $purchase) }}">
								{{ xr_pm_thumbnail($purchase.Product, '', 'xrpmThumbnail--dataList') }}
							</xf:cell>
							<xf:main href="{{ link('product-manager/purchases/edit', $purchase) }}" label="{$purchase.Product.product_title} - {$purchase.purchase_key}">
								<xf:explain>
									<ul class="listInline listInline--bullet">
										<li><b>{{ phrase('user') }}:</b> <xf:username user="{$purchase.User}" href="" defaultname="{$purchase.username}" /></li>
										<xf:if is="$purchase.old_cart_key">
											<li><b>{{ phrase('xr_pm_cart_key') }}:</b> {$purchase.old_cart_key}</li>
										</xf:if>
										<xf:if is="$purchase.parent_purchase_key">
											<li><b>{{ phrase('xr_pm_parent_key') }}:</b> {$purchase.parent_purchase_key}</li>
										</xf:if>
										<li><b>{{ phrase('xr_pm_product') }}:</b> {$purchase.Product.product_title}</li>
										<li><b>{{ phrase('xr_pm_licensed_to') }}:</b>
											<xf:if is="$purchase.license_name AND $purchase.license_url">
												{$purchase.license_name} - {$purchase.license_url}
											<xf:else />
												{{ phrase('n_a') }}
											</xf:if>
										</li>
									</ul>
								</xf:explain>
							</xf:main>
						</xf:datarow>
					</xf:foreach>
					<xf:if is="$filter AND $total > $perPage">
						<xf:datarow rowclass="dataList-row--note dataList-row--noHover js-filterForceShow">
							<xf:cell colspan="3">{{ phrase('more_records_matching_filter_more_specific') }}</xf:cell>
						</xf:datarow>
					</xf:if>
				</xf:datalist>
			</div>
			<div class="block-footer block-footer--split">
				<span class="block-footer-counter">{{ display_totals($users, $total) }}</span>
			</div>
		</div>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="product-manager/purchases"
			params="{{ {'criteria': $criteria, 'order': $order, 'direction': $direction} }}"
			wrapperclass="js-filterHide block-outer block-outer--after" />
	</div>
<xf:else />
	<div class="blockMessage">{{ phrase('no_records_matched') }}</div>
</xf:if>]]></template>
  <template type="admin" title="xr_pm_purchase_search" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_search_purchases') }}</xf:title>

<xf:pageaction>
	<xf:button href="{{ link('product-manager/purchases/add') }}" icon="add">{{ phrase('xr_pm_add_purchase') }}</xf:button>
</xf:pageaction>

<div class="block">
	<div class="block-container">
		<xf:form action="{{ link('product-manager/purchases') }}">
			<div class="block-body">
				<xf:textboxrow name="criteria[username]" value="{$criteria.username}" label="{{ phrase('user_name') }}" />

				<xf:textboxrow name="criteria[license_name]" value="{$criteria.license_name}" label="{{ phrase('xr_pm_license_name') }}" />

				<xf:textboxrow name="criteria[license_url]" value="{$criteria.license_url}" label="{{ phrase('xr_pm_license_url') }}" />

				<hr class="formRowSep" />

				<xf:textboxrow name="criteria[purchase_key]" value="{$criteria.purchase_key}" label="{{ phrase('xr_pm_purchase_key') }}" />

				<xf:textboxrow name="criteria[old_cart_key]" value="{$criteria.old_cart_key}" label="{{ phrase('xr_pm_old_cart_key') }}" />

				<xf:textboxrow name="criteria[parent_purchase_key]" value="{$criteria.parent_purchase_key}" label="{{ phrase('xr_pm_parent_purchase_key') }}" />

				<hr class="formRowSep" />

				<xf:selectrow name="criteria[product_id]" value="{$criteria.product_id}"
					label="{{ phrase('xr_pm_product') }}">

					<xf:option>{{ phrase('(any)') }}</xf:option>
					<xf:foreach loop="$products" value="$product">
						<xf:option value="{$product.product_id}">{$product.product_title}</xf:option>
					</xf:foreach>
				</xf:selectrow>

				<hr class="formRowSep" />

				<xf:formrow rowtype="input"
					label="{{ phrase('xr_pm_purchased_between') }}">

					<div class="inputGroup">
						<xf:dateinput name="criteria[purchase_date][start]" value="{$criteria.purchase_date.start}" size="15" />
						<span class="inputGroup-text">-</span>
						<xf:dateinput name="criteria[purchase_date][end]" value="{$criteria.purchase_date.end}" size="15" />
					</div>
				</xf:formrow>

				<xf:formrow rowtype="input"
					label="{{ phrase('xr_pm_expires_between') }}">

					<div class="inputGroup">
						<xf:dateinput name="criteria[expiry_date][start]" value="{$criteria.expiry_date.start}" size="15" />
						<span class="inputGroup-text">-</span>
						<xf:dateinput name="criteria[expiry_date][end]" value="{$criteria.expiry_date.end}" size="15" />
					</div>
				</xf:formrow>

				<hr class="formRowSep" />

				<xf:checkboxrow name="criteria[purchase_state]" label="{{ phrase('xr_pm_purchase_state') }}" value="{$criteria.purchase_state}">
					<xf:options source="{$purchaseStates}" />
				</xf:checkboxrow>

				<xf:checkboxrow name="criteria[purchase_type]" label="{{ phrase('xr_pm_purchase_type') }}" value="{$criteria.purchase_type}">
					<xf:options source="{$purchaseTypes}" />
				</xf:checkboxrow>

				<hr class="formRowSep" />

				<xf:formrow rowtype="input"
					label="{{ phrase('sort') }}">

					<div class="inputPair">
						<xf:select name="order">
							<xf:options source="{$sortOrders}" />
						</xf:select>
						<xf:select name="direction">
							<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
							<xf:option value="desc">{{ phrase('descending') }}</xf:option>
						</xf:select>
					</div>
				</xf:formrow>
			</div>
			<xf:submitrow sticky="true" icon="search" />
		</xf:form>
	</div>
</div>]]></template>
  <template type="admin" title="xr_pm_purchase_transfer" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('xr_pm_transfer_purchase') }} {$purchase.Product.product_title} - {$purchase.purchase_key}</xf:title>

<xf:form action="{{ link('product-manager/purchases/transfer', $purchase) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xr_pm_please_confirm_which_user_you_would_like_to_transfer_following_to', {'name': $purchase.username}) }}
				<strong><a href="{{ link('product-manager/purchases/edit', $purchase) }}">{$purchase.Product.product_title} - {$purchase.purchase_key}</a></strong>
				<div class="blockMessage blockMessage--important blockMessage--small">{{ phrase('xr_pm_note_both_users_where_valid_will_be_emailed_regarding_transfer') }}</div>
			</xf:inforow>
			<xf:textboxrow label="{{ phrase('user_name') }}" name="username" ac="single" />
		</div>
		<xf:submitrow submit="{{ phrase('xr_pm_transfer') }}" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_tools_rebuild" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:macro template="tools_rebuild" name="rebuild_job"
	arg-header="XR PM: Product categories"
	arg-job="XR\PM:Category" />]]></template>
  <template type="admin" title="xr_pm_version_delete" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('confirm_action') }}</xf:title>

<xf:form action="{{ link('product-manager/products/versions/delete', $version) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('please_confirm_that_you_want_to_delete_following:') }}
				<strong><a href="{{ link('product-manager/products/versions/edit', $version) }}">{$version.version_string}</a></strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="delete" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_version_download_log" version_id="2000034" version_string="2.0.0 Beta 4"><![CDATA[<xf:title>{{ phrase('xr_pm_purchasers_who_downloaded_x_y', {'product_title': $version.Product.product_title, 'version_string': $version.version_string}) }}</xf:title>

<div class="block">
	<div class="block-container js-downloadLogList-{$version.product_version_id}">
		<xf:datalist class="block-body">
			<tbody class="dataList-rowGroup">
			<xf:foreach loop="$downloads" value="$download">
				<xf:datarow rowtype="subsection" rowclass="dataList-row--noHover">
					<xf:cell href="{{ link('product-manager/purchases/edit', $download.Purchase) }}">
						{$download.purchase_key}<xf:if is="$download.Purchase.license_name"> - {$download.Purchase.license_name}</xf:if>
					</xf:cell>
				</xf:datarow>
				<xf:datarow>
					<xf:cell>
						<xf:macro template="public:member_list_macros" name="item"
							arg-user="{$download.User}"
							arg-extraData="{{ date_dynamic($download.last_download_date)|preescaped }}" />
					</xf:cell>
				</xf:datarow>
			</xf:foreach>
			</tbody>
		</xf:datalist>
		<xf:if is="$hasNext">
			<div class="block-footer">
				<span class="block-footer-controls"><xf:button href="{{ link('product-manager/products/versions/download-log', $version, {'page': $page + 1}) }}"
					data-xf-click="inserter"
					data-replace=".js-downloadLogList-{$version.product_version_id}"
					data-scroll-target="< .overlay">
					{{ phrase('next...') }}
				</xf:button></span>
			</div>
		</xf:if>
	</div>
</div>]]></template>
  <template type="admin" title="xr_pm_version_edit" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_edit_version:') }} {$version.Product.product_title} {$version.version_string}</xf:title>

<xf:form action="{{ link('product-manager/products/versions/edit', $version) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow label="{{ phrase('xr_pm_version_string') }}" name="version_string" value="{$version.version_string_}"
				placeholder="{{ phrase('xr_pm_current_version_x', {'version_string': $version.version_string}) }}" />

			<xf:editorrow name="version_details" value="{$version.version_details}"
				label="{{ phrase('xr_pm_version_details') }}"
				data-min-height="100"
			/>

			<xf:formrow rowtype="input" label="{{ phrase('xr_pm_change_log_items') }}">
				<ul class="inputList">
					<xf:foreach loop="$version.changelog" key="$counter" value="$changelog">
						<li><xf:textbox name="changelog[{$counter}]" value="{$changelog}" /></li>
					</xf:foreach>

					<li data-xf-init="field-adder" data-increment-format="changelog[{counter}]">
						<xf:textbox name="changelog[{{ count($version.changelog) }}]" />
					</li>
				</ul>
				<div class="formRow-explain">
					{{ phrase('xr_pm_add_change_change_log_items_to_above_fields') }}
				</div>
			</xf:formrow>

			<xf:checkboxrow>
				<xf:option label="{{ phrase('xr_pm_version_is_unsupported') }}" name="is_unsupported" selected="{$version.is_unsupported}">
					<xf:hint>{{ phrase('xr_pm_version_is_unsupported_explain') }}</xf:hint>
				</xf:option>
			</xf:checkboxrow>

			<hr class="formRowSep" />

			<xf:macro template="public:xr_pm_attachment_macros" name="displayer"
				arg-label="{{ phrase('xr_pm_existing_file') }}"
				arg-attachment="{$version.Version}"
			/>

			<xf:set var="$extra">
				<div class="formRow-explain">
					{{ phrase('xr_pm_replacing_file_here_does_not_release_update_or_notify_purchasers', {'link': link('product-manager/products/add-version', $version.Product)}) }}
				</div>
			</xf:set>
			<xf:macro template="public:xr_pm_attachment_macros" name="uploader"
				arg-buttonLabel="Upload new file"
				arg-attachmentData="{$productAttachData}"
				arg-hiddenName="product_attach_hash"
				arg-extra="{$extra}"
			/>
		</div>
		<xf:submitrow icon="save" />
	</div>
</xf:form>]]></template>
  <template type="admin" title="xr_pm_version_list" version_id="2000037" version_string="2.0.0 Beta 7"><![CDATA[<xf:title>{{ phrase('xr_pm_product_versions') }}</xf:title>

<xf:if is="$groupedVersions is not empty">
	<xf:foreach loop="$products" key="$productId" value="$productTitle" if="{$groupedVersions.{$productId}} is not empty">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">
					<span class="collapseTrigger collapseTrigger--block {{ !is_toggled('_product-' . $productId) ? ' is-active' : '' }}" data-xf-click="toggle" data-target="< :up:next" data-xf-init="toggle-storage" data-storage-type="cookie" data-storage-key="_product-{$productId}">
						<a href="{{ link('product-manager/products/edit', {'product_id': $productId, 'product_title': $productTitle}) }}">{$productTitle}</a>
					</span>
					<span class="block-desc">
						<a href="{{ link('product-manager/products/add-version', {'product_id': $productId, 'product_title': $productTitle}) }}" data-xf-click="overlay">{{ phrase('xr_pm_add_version') }}</a>
					</span>
				</h3>
				<xf:datalist class="block-body block-body--collapsible {{ !is_toggled('_product-' . $productId) ? ' is-active' : '' }}">
					<tbody>
					<xf:foreach loop="{$groupedVersions.{$productId}}" value="$version">
						<xf:datarow
							label="{$version.version_string}"
							href="{{ link('product-manager/products/versions/edit', $version) }}"
							overlay="true"
							delete="{{ link('product-manager/products/versions/delete', $version) }}">
							<xf:action href="{{ link('product-manager/products/versions/download-log', $version) }}" overlay="true">
								{{ phrase('xr_pm_download_log') }}
							</xf:action>
							<xf:explain>{{ phrase('xr_pm_release_date:') }} <xf:date time="{$version.release_date}" /></xf:explain>
						</xf:datarow>
					</xf:foreach>
					</tbody>
				</xf:datalist>
			</div>
		</div>
	</xf:foreach>
<xf:else />
	<div class="blockMessage">{{ phrase('no_items_have_been_created_yet') }}</div>
</xf:if>]]></template>
  <template type="email" title="payment_received_receipt_xr_pm_product" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<mail:subject>
	<xf:if is="$purchasable.purchasable.purchase_type == 'product'">
		{{ phrase('xr_pm_receipt_for_your_product_purchase_at_x', {'board_title': $xf.options.boardTitle}) }}
	<xf:elseif is="$purchasable.purchasable.purchase_type == 'renewal'" />
		{{ phrase('xr_pm_receipt_for_your_renewal_at_x', {'board_title': $xf.options.boardTitle}) }}
	<xf:else />
		{{ phrase('xr_pm_receipt_for_your_purchase_of_optional_extras_at_x', {'board_title': $xf.options.boardTitle}) }}
	</xf:if>
</mail:subject>

<p>{{ phrase('xr_pm_thank_you_for_making_purchase_at_x', {'board_url': link('canonical:index'), 'board_title': $xf.options.boardTitle}) }}</p>

<table border="0" width="100%" cellpadding="0" cellspacing="0">
	<tr>
		<td><b>{{ phrase('purchased_item') }}</b></td>
		<td align="right"><b>{{ phrase('price') }}</b></td>
	</tr>
	<tr>
		<td><a href="{{ link('canonical:products/purchase', $purchasable.purchasable) }}">{$purchasable.title}</a></td>
		<td align="right">{$purchasable.purchasable.total_price|currency($purchasable.purchasble.purchase_currency)}</td>
	</tr>
</table>

<p><a href="{{ link('canonical:products/purchases') }}" class="button">{{ phrase('xr_pm_view_all_of_your_purchases') }}</a></p>

<xf:if is="$xf.toUser.canUseContactForm()">
	<p>{{ phrase('thank_you_for_your_purchase_questions_contact_us', {'contacturl': link('canonical:misc/contact') }) }}</p>
<xf:else />
	<p>{{ phrase('thank_you_for_your_purchase') }}</p>
</xf:if>]]></template>
  <template type="email" title="xr_pm_purchase_expired" version_id="2000070" version_string="2.0.0"><![CDATA[<mail:subject>
	{{ phrase('xr_pm_your_purchase_for_x_has_expired', {'product_title': $product.product_title}) }}
</mail:subject>

{{ phrase('xr_pm_purchase_expired_email_body', {'name': $receiver.username, 'purchase_key': $purchase.purchase_key, 'product_title': $product.product_title}) }}

<p><a href="{{ link('canonical:products/purchase', $purchase) }}" class="button">{{ phrase('xr_pm_view_this_purchase') }}</a></p>
<p><a href="{{ link('canonical:products/purchase/renew', $purchase) }}" class="button">{{ phrase('xr_pm_renew_this_purchase') }}</a></p>]]></template>
  <template type="email" title="xr_pm_purchase_transferred_from" version_id="2000070" version_string="2.0.0"><![CDATA[<mail:subject>
	{{ phrase('xr_pm_your_purchase_for_x_has_been_transferred', {'product_title': $product.product_title}) }}
</mail:subject>

{{ phrase('xr_pm_purchase_transferred_from_email_body', {'name': $receiver.username, 'purchase_key': $purchase.purchase_key, 'product_title': $product.product_title}) }}]]></template>
  <template type="email" title="xr_pm_purchase_transferred_to" version_id="2000070" version_string="2.0.0"><![CDATA[<mail:subject>
	{{ phrase('xr_pm_purchase_for_x_has_been_transferred_to_you', {'product_title': $product.product_title}) }}
</mail:subject>


{{ phrase('xr_pm_purchase_transferred_to_email_body', {'name': $receiver.username, 'purchase_key': $purchase.purchase_key, 'product_title': $product.product_title}) }}

<p><a href="{{ link('canonical:products/purchase', $purchase) }}" class="button">{{ phrase('xr_pm_view_this_purchase') }}</a></p>]]></template>
  <template type="email" title="xr_pm_version_released" version_id="2000170" version_string="2.0.1"><![CDATA[<mail:subject>
	{{ phrase('xr_pm_version_update_subject', {
		'product': $product.product_title,
		'version': $version.version_string
	}) }}
</mail:subject>

{{ phrase('xr_pm_x_thank_you_for_your_purchase_at_y', {
	'name': $receiver.username,
	'boardUrl': $xf.options.boardUrl,
	'board_title': $xf.options.boardTitle,
	'product': link('canonical:products', $product),
	'product_title': $product.product_title
}) }}

<h2><a href="{{ link('canonical:products/version', $version) }}">{$product.product_title} {$version.version_string}</a></h2>

<div class="message">
	{{ bb_code_type('emailHtml', $version.version_details, 'xr_pm_product_version', $version) }}
	<xf:if is="$version.changelog">
		<ul>
			<xf:foreach loop="$version.changelog" value="$changelog">
				<xf:if is="$changelog">
					<li>{$changelog}</li>
				</xf:if>
			</xf:foreach>
		</ul>
	</xf:if>
</div>

<div class="minorText">{{ phrase('xr_pm_unsubscribe_from_all_product_updates', {'link': link('canonical:email-stop/content', $receiver, {'t': 'xr_pm_product'})}) }}</div>]]></template>
  <template type="public" title="alert_xr_pm_product_purchase_expired" version_id="2000070" version_string="2.0.0"><![CDATA[{{ phrase('xr_pm_your_purchase_x_for_product_y_has_expired', {'purchase_key': $content.purchase_key, 'product_title': $content.Product.product_title, 'purchase': link('canonical:products/purchase/renew', $content)}) }}]]></template>
  <template type="public" title="alert_xr_pm_product_version_release" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[{{ phrase('xr_pm_x_has_been_updated_to_version_y', {
	'product': '<a href="' . link('products', $content.Product) . '">' . $content.Product.product_title . '</a>',
	'version': '<a href="' . link('products/version', $content) . '" class="fauxBlockLink-blockLink">' . $content.version_string . '</a>'
}) }}]]></template>
  <template type="public" title="core_xr_pm.less" version_id="2000037" version_string="2.0.0 Beta 7"><![CDATA[@_xrpmThumbSize: xf-option('xr_pm_thumbnail_size', px);
@_xrpmThumbDisplaySize: (@_xrpmThumbSize) / 2.3;
@_xrpmThumbDisplaySizeMedium: (@_xrpmThumbSize) / 3;
@_xrpmThumbDisplaySizeSmall: (@_xrpmThumbSize) / 6;
@_structItem-cellPaddingH: ((@xf-paddingMedium) + (@xf-paddingLarge)) / 2; // average
@_structItem-cellPaddingV: @xf-paddingLarge;

.structItem-cell
{
	&.structItem-cell--productThumb
	{
		width: ((@_xrpmThumbDisplaySize) + (@_structItem-cellPaddingH) * 2);
		position: relative;

		&.structItem-cell--productThumb--medium
		{
			width: ((@_xrpmThumbDisplaySizeMedium) + (@_structItem-cellPaddingH) * 2);
			position: relative;
		}

		@media (max-width: @xf-responsiveMedium)
		{
			display: block;
			margin-left: auto;
			margin-right: auto;
		}
	}

	&.structItem-cell--main
	{
		&.structItem-cell--productMain
		{
			.structItem-productInfo
			{
				margin-top: @xf-paddingSmall;
				font-size: @xf-fontSizeSmaller;

				> ul
				{
					padding: 0;
					margin: @xf-paddingSmall 0;

					> li
					{
						list-style-position: inside;
						.m-overflowEllipsis();
					}
				}
			}

			@media (max-width: @xf-responsiveMedium)
			{
				padding-left: @_structItem-cellPaddingH;
				width: 100%;
				display: block;
			}
		}
	}

	&.structItem-cell--productMeta
	{
		width: 230px;

		.button--product
		{
			display: block;
			width: 100%;
			margin-bottom: 5px;
		}

		@media (max-width: @xf-responsiveWide)
		{
			width: 180px;
		}

		@media (max-width: @xf-responsiveMedium)
		{
			width: 100%;
			display: block;
		}
	}
}

.xrpmThumbnail
{
	display: block;
	width: @_xrpmThumbDisplaySize;
	height: @_xrpmThumbDisplaySize;

	&.xrpmThumbnail--small
	{
		width: @_xrpmThumbDisplaySizeSmall;
		height: @_xrpmThumbDisplaySizeSmall;
	}

	&.xrpmThumbnail--dataList
	{
		width: 54px;
		height: 54px;
	}

	&.xrpmThumbnail--medium
	{
		width: @_xrpmThumbDisplaySizeMedium;
		height: @_xrpmThumbDisplaySizeMedium;
	}

	&.xrpmThumbnail--default
	{
		background: mix(@xf-textColorMuted, @xf-avatarBg, 25%);
		text-align: center;
		text-decoration: none !important;

		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;

		position: relative;

		> span:before
		{
			.m-faBase();
			.m-faContent(@fa-var-ellipsis-h);
			font-size: 60px;
			position: absolute;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
			color: @xf-textColorMuted;
			.m-textOutline(@xf-textColorMuted, xf-intensify(@xf-textColorMuted, 20%));

			.xrpmThumbnail--small&,
			.xrpmThumbnail--dataList&
			{
				font-size: @xf-fontSizeLarge * 2;
			}
		}
	}
}

.listFeatures
{
	margin-top: 2px;
}

.tabs
{
	&.tabs--product
	{
		.tabs-extra
		{
			a
			{
				display: inline-block;
			}
		}
	}
}]]></template>
  <template type="public" title="search_form_xr_pm_product" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_search_products') }}</xf:title>

<xf:macro template="search_form_macros" name="keywords" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="user" arg-input="{$input}" />
<xf:macro template="search_form_macros" name="date" arg-input="{$input}" />

<xf:formrow rowtype="input" label="{{ phrase('xr_pm_search_in_categories') }}">

	<ul class="inputList">
		<li><xf:select name="c[categories][]" size="7" multiple="multiple" value="{$input.c.categories|default([0])}">
			<xf:option value="">{{ phrase('all_categories') }}</xf:option>
			<xf:foreach loop="$categoryTree.getFlattened(0)" value="$treeEntry">
				<xf:option value="{$treeEntry.record.category_id}">{{ repeat('&nbsp;&nbsp;', $treeEntry.depth)|raw }} {$treeEntry.record.title}</xf:option>
			</xf:foreach>
		</xf:select></li>
		<li><xf:checkbox standalone="true">
			<xf:option name="c[child_categories]" selected="{{ (!$input.c || $input.c.child_categories) }}" label="{{ phrase('xr_pm_search_child_categories_as_well') }}" />
		</xf:checkbox></li>
	</ul>
</xf:formrow>

<xf:checkboxrow>
	<xf:option name="c[include_versions]">{{ phrase('xr_pm_include_product_versions') }}</xf:option>
</xf:checkboxrow>

<xf:macro template="search_form_macros" name="order"
	arg-isRelevanceSupported="{$isRelevanceSupported}"
	arg-input="{$input}" />]]></template>
  <template type="public" title="search_result_xr_pm_product" version_id="2000032" version_string="2.0.0 Beta 2"><![CDATA[<li class="block-row block-row--separated">
	<div class="contentRow {{ !$product.active ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$product.User}" size="s" defaultname="{$product.username}" />
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('products', $product) }}">{{ highlight($product.product_title, $options.term) }}</a>
				<span class="u-muted">{$product.Version.version_string}</span>
			</h3>

			<div class="contentRow-snippet">{{ snippet($product.product_details, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li><xf:username user="{$product.User}" defaultname="{$product.username}" /></li>
					<li>{{ phrase('xr_pm_product') }}</li>
					<li><xf:date time="{$product.product_date}" /></li>
					<xf:if is="$product.category_id">
						<li>{{ phrase('category:') }} <a href="{{ link('products/categories', $product.Category) }}">{$product.Category.title}</a></li>
					</xf:if>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="search_result_xr_pm_product_version" version_id="2000032" version_string="2.0.0 Beta 2"><![CDATA[<li class="block-row block-row--separated">
	<div class="contentRow {{ !$product.active ? 'is-deleted' : '' }}">
		<span class="contentRow-figure">
			<xf:avatar user="{$product.User}" size="s" defaultname="{$product.username}" />
		</span>
		<div class="contentRow-main">
			<h3 class="contentRow-title">
				<a href="{{ link('products/changelog', $product) }}">{{ highlight($product.product_title, $options.term) }}</a>
				<span class="u-muted">{$product.Version.version_string}</span>
			</h3>

			<div class="contentRow-snippet">{{ snippet($version.version_details, 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li><xf:username user="{$product.User}" defaultname="{$product.username}" /></li>
					<li>{{ phrase('xr_pm_version') }}</li>
					<li><xf:date time="{$version.release_date}" /></li>
					<xf:if is="$product.category_id">
						<li>{{ phrase('category:') }} <a href="{{ link('products/categories', $product.Category) }}">{$product.Category.title}</a></li>
					</xf:if>
				</ul>
			</div>
		</div>
	</div>
</li>]]></template>
  <template type="public" title="xr_pm_applied_coupons" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:if is="$newCoupons">
	<xf:foreach loop="$newCoupons" value="$coupon">
		<li>
			<a href="javascript:" class="js-deleteCoupon labelLink" data-coupon-id="{$coupon.coupon_id}" style="text-decoration: none">
				<span class="label label--primary"
					data-xf-init="tooltip"
					title="{$coupon.coupon_description}"
				>
					{$coupon.coupon_code} - {$coupon.coupon_title}
				</span>
			</a>
		</li>
	</xf:foreach>
<xf:else />
	<!-- no coupons loaded -->
</xf:if>]]></template>
  <template type="public" title="xr_pm_attach_upload_macros" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro name="upload_link"
	arg-type="!"
	arg-hash="!"
	arg-context="!"
	arg-constraints="!"
	arg-hiddenName="!"
	arg-label=""
>

	<xf:js prod="xf/attachment_manager-compiled.js" dev="vendor/flow.js/flow-compiled.js, xf/attachment_manager.js" />

	<xf:button href="{{ link_type('public', 'attachments/upload', null, {'type': $type, 'context': $context, 'hash': $hash}) }}"
		target="_blank" class="button--link js-attachmentUpload" icon="attach"
		data-accept=".{$constraints.extensions|join(',.')}">
		{$label}
	</xf:button>
	<xf:hiddenval name="{$hiddenName}">{$hash}</xf:hiddenval>
	<xf:hiddenval name="{$hiddenName}_combined">{{ {'type': $type, 'context': $context, 'hash': $hash}|json }}</xf:hiddenval>
</xf:macro>

<xf:macro name="upload_link_from_data"
	arg-attachmentData="!"
	arg-hiddenName="!"
	arg-label=""
>
	<xf:macro name="upload_link"
		arg-type="{$attachmentData.type}"
		arg-hash="{$attachmentData.hash}"
		arg-context="{$attachmentData.context}"
		arg-constraints="{$attachmentData.constraints}"
		arg-hiddenName="{$hiddenName}"
		arg-label="{$label}"
	/>
</xf:macro>

<xf:macro name="uploaded_files_list" arg-attachments="{{ [] }}" arg-listClass="">
	<xf:css src="public:attachments.less" />
	<ul class="attachUploadList {$listClass} js-attachmentFiles u-hidden {{ $attachments is not empty ? 'is-active' : '' }}">
		<li class="attachUploadList-insertAll js-attachmentInsertAllRow u-hidden">
			<span>{{ phrase('insert_all:') }}</span>
			<span class="buttonGroup buttonGroup--aligned">
				<xf:button class="button--small js-attachmentAllAction" data-action="thumbnail">
					{{ phrase('thumbnail') }}
				</xf:button>
				<xf:button class="button--small js-attachmentAllAction" data-action="full">
					{{ phrase('full_image') }}
				</xf:button>
			</span>
		</li>
	<xf:foreach loop="$attachments" value="$attachment">
		<xf:macro name="uploaded_file" arg-attachment="{$attachment}" />
	</xf:foreach>
	</ul>
	<xf:macro name="uploaded_file_template" />
</xf:macro>

<xf:macro name="uploaded_file" arg-attachment="!" arg-noJsFallback="{{ false }}">
	<li class="js-attachmentFile" data-attachment-id="{$attachment.attachment_id}">
		<div class="contentRow">
			<span class="contentRow-figure attachUploadList-figure">
				<xf:if is="$attachment.has_thumbnail">
					<a href="{{ link('attachments', $attachment, {'hash': $attachment.temp_hash}) }}" target="_blank"><img src="{{ base_url($attachment.thumbnail_url) }}" class="js-attachmentThumb" alt="{$attachment.filename}" /></a>
				<xf:else />
					<a href="{{ link('attachments', $attachment, {'hash': $attachment.temp_hash}) }}" target="_blank"><i class="attachUploadList-placeholder" aria-hidden="true"></i></a>
				</xf:if>
			</span>
			<div class="contentRow-main">
				<xf:if is="$noJsFallback">
					<span class="contentRow-extra">
						<xf:button type="submit" class="button--small" name="delete" value="{$attachment.attachment_id}">
							{{ phrase('button.delete') }}
						</xf:button>
					</span>
				<xf:else />
					<span class="contentRow-extra u-jsOnly">
						<xf:button class="button--small js-attachmentAction" data-action="delete">
							{{ phrase('button.delete') }}
						</xf:button>
					</span>
				</xf:if>
				<div class="contentRow-title">
					<a href="{{ link('attachments', $attachment, {'hash': $attachment.temp_hash}) }}" class="js-attachmentView" target="_blank">{$attachment.filename}</a>
				</div>
				<xf:if is="$attachment.has_thumbnail AND !$noJsFallback">
					<div class="contentRow-spaced contentRow-minor attachUploadList-insertRow js-attachmentInsertRow">
						<span>{{ phrase('insert:') }}</span>
						<span class="buttonGroup buttonGroup--aligned">
							<xf:button class="button--small js-attachmentAction" data-action="thumbnail">
								{{ phrase('thumbnail') }}
							</xf:button>
							<xf:button class="button--small js-attachmentAction" data-action="full">
								{{ phrase('full_image') }}
							</xf:button>
						</span>
					</div>
				</xf:if>
			</div>
		</div>
	</li>
</xf:macro>

<xf:macro name="uploaded_file_template">
	<script type="text/template" class="js-attachmentUploadTemplate">
		<li class="js-attachmentFile" {{ mustache('#attachment_id', 'data-attachment-id="{{attachment_id}}"') }}>
			<div class="contentRow">
				<span class="contentRow-figure attachUploadList-figure">
					<xf:mustache name="#thumbnail_url">
						<a href="{{ mustache('link') }}" target="_blank"><img src="{{ mustache('thumbnail_url') }}" class="js-attachmentThumb" alt="{{ mustache('filename') }}" /></a>
					</xf:mustache>
					<xf:mustache name="^thumbnail_url">
						<i class="attachUploadList-placeholder" aria-hidden="true"></i>
					</xf:mustache>
				</span>
				<div class="contentRow-main">
					<span class="contentRow-extra u-jsOnly">
						<xf:mustache name="^uploading">
							<xf:button class="button--small js-attachmentAction" data-action="delete">
								{{ phrase('button.delete') }}
							</xf:button>
						</xf:mustache>
						<xf:mustache name="#uploading">
							<xf:button class="button--small js-attachmentAction" data-action="cancel">
								{{ phrase('button.cancel') }}
							</xf:button>
						</xf:mustache>
					</span>
					<div class="contentRow-title">
						<xf:mustache name="#link">
							<a href="{{ mustache('link') }}" class="js-attachmentView" target="_blank">{{ mustache('filename') }}</a>
						</xf:mustache>
						<xf:mustache name="^link">
							<span>{{ mustache('filename') }}</span>
						</xf:mustache>
					</div>

					<xf:mustache name="#uploading">
						<div class="contentRow-spaced">
							<div class="attachUploadList-progress js-attachmentProgress"></div>
							<div class="attachUploadList-error js-attachmentError"></div>
						</div>
					</xf:mustache>

					<xf:mustache name="^uploading">
						<xf:mustache name="#thumbnail_url">
							<div class="contentRow-spaced attachUploadList-insertRow js-attachmentInsertRow">
								<span>{{ phrase('insert:') }}</span>
								<span class="buttonGroup buttonGroup--aligned">
									<xf:button class="button--small js-attachmentAction" data-action="thumbnail">
										{{ phrase('thumbnail') }}
									</xf:button>
									<xf:button class="button--small js-attachmentAction" data-action="full">
										{{ phrase('full_image') }}
									</xf:button>
								</span>
							</div>
						</xf:mustache>
					</xf:mustache>
				</div>
			</div>
		</li>
	</script>
</xf:macro>

<xf:macro name="upload_block"
	arg-initAttachmentManager="{{ true }}"
	arg-attachmentData="!"
	arg-hiddenName="!"
	arg-label=""
>
	<div data-xf-init="{{ $initAttachmentManager ? 'attachment-manager' : '' }}">
		<xf:macro name="uploaded_files_list" arg-attachments="{$attachmentData.attachments}" />

		<xf:macro name="upload_link_from_data"
			arg-attachmentData="{$attachmentData}"
			arg-hiddenName="{$hiddenName}"
			arg-label="{$label}"
		/>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_attachment_macros" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro name="upload_editor" arg-label="" arg-buttonLabel="!" arg-attachmentData="!" arg-hiddenName="!" arg-isInsert="{{ true }}" arg-iconUrl="" arg-title="" arg-attachment="!" arg-uploaderExtra="" arg-extra="">
	<xf:if is="$isInsert">
		<xf:macro name="uploader"
			arg-label="{$label}"
			arg-buttonLabel="{$buttonLabel}"
			arg-attachmentData="{$attachmentData}"
			arg-hiddenName="{$hiddenName}"
			arg-extra="{$uploaderExtra}"
		/>
	<xf:else />
		<xf:macro name="displayer"
			arg-label="{$label}"
			arg-iconUrl="{$iconUrl}"
			arg-title="{$title}"
			arg-attachment="{$attachment}"
			arg-extra="{$extra}"
		/>
	</xf:if>
</xf:macro>

<xf:macro name="uploader" arg-label="" arg-buttonLabel="!" arg-attachmentData="!" arg-hiddenName="!" arg-extra="" arg-row="{{ true }}">
	<xf:set var="$inner">
		<xf:macro template="xr_pm_attach_upload_macros" name="upload_block"
			arg-attachmentData="{$attachmentData}"
			arg-hiddenName="{$hiddenName}"
			arg-label="{$buttonLabel}"
		/>
		<xf:if is="$extra">
			{$extra|raw}
		</xf:if>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow label="{$label}" rowtype="button">
			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>

<xf:macro name="displayer" arg-label="" arg-iconUrl="" arg-title="" arg-attachment="!" arg-extra="" arg-row="{{ true }}" arg-link="attachments/view">
	<xf:set var="$inner">
		<div class="contentRow contentRow--alignMiddle">
			<div class="contentRow-figure contentRow-figure--fixedSmall">
				<xf:if is="$iconUrl">
					<img src="{$iconUrl}" alt="{$title}" />
				<xf:else />
					<a style="pointer-events: none"><i class="fa fa-file-o fa-3x" aria-hidden="true"></i></a>
				</xf:if>
			</div>
			<div class="contentRow-main">
				<a href="{{ link($link, $attachment) }}">{$attachment.filename}</a>
				<xf:if is="$extra">
					{$extra|raw}
				</xf:if>
			</div>
		</div>
	</xf:set>
	<xf:if is="$row">
		<xf:formrow label="{$label}">
			{$inner|raw}
		</xf:formrow>
	<xf:else />
		{$inner|raw}
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_category_list_macros" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro name="category_list"
	arg-selected="0"
	arg-pathToSelected="{{ [] }}"
	arg-children="!"
	arg-extras="!"
	arg-isActive="{{ false }}">

	<ol class="categoryList toggleTarget{{ $isActive ? ' is-active' : '' }}">
		<xf:foreach loop="$children" key="$id" value="$child">
			<xf:macro name="category_list_item"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-category="{$child.record}"
				arg-extras="{$extras.{$id}}"
				arg-children="{$child}"
				arg-childExtras="{$extras}" />
		</xf:foreach>
	</ol>
</xf:macro>

<xf:macro name="category_list_item"
	arg-selected="!"
	arg-pathToSelected="{{ [] }}"
	arg-category="!"
	arg-extras="!"
	arg-children="!"
	arg-childExtras="!">

	<xf:set var="$isSelected" value="{{ $category.category_id == $selected }}" />
	<xf:set var="$hasPathToSelected" value="{$pathToSelected.{$category.category_id}}" />
	<xf:set var="$isActive" value="{{ $isSelected OR $hasPathToSelected AND $children is not empty }}" />

	<li class="categoryList-item">
		<div class="categoryList-itemRow">
			<xf:if is="$children is not empty">
				<a class="categoryList-toggler{{ $isActive ? ' is-active' : '' }}"
					data-xf-click="toggle" data-target="< :up :next"
					role="button" tabindex="0" aria-label="{{ phrase('toggle_expanded') }}"></a>
			<xf:else />
				<span class="categoryList-togglerSpacer"></span>
			</xf:if>
			<a href="{{ link('products/categories', $category) }}" class="categoryList-link{{ $isSelected ? ' is-selected' : '' }}">
				{$category.title}
			</a>
			<span class="categoryList-label">
				<span class="label label--subtle label--smallest">{$extras.product_count|number_short}</span>
			</span>
		</div>
		<xf:if is="$children is not empty">
			<xf:macro name="category_list"
				arg-selected="{$selected}"
				arg-pathToSelected="{$pathToSelected}"
				arg-children="{$children}"
				arg-extras="{$childExtras}"
				arg-isActive="{$isActive}" />
		</xf:if>
	</li>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_category_view" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title page="{$page}">{$category.title}</xf:title>
<xf:description>{$category.description|raw}</xf:description>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:products/categories', $category, {'page': $page}) }}" />

<xf:breadcrumb source="$category.getBreadcrumbs(false)" />

<div class="block">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="products/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />
	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xr_pm_overview_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="products"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-body">
			<xf:if is="$products is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$products" value="$product">
						<xf:macro template="xr_pm_product_list_macros" name="product"
							arg-product="{$product}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xr_pm_there_no_products_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xr_pm_no_products_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="products/categories" data="{$category}" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('xr_pm_product_categories') }}</xf:page>
<xf:sidenav key="xrpmSideNav">
	<xf:if is="$categoryTree">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xr_pm_product_categories') }}</h3>
				<div class="block-body">
					<xf:if is="$categoryTree.count()">
						<xf:macro template="xr_pm_category_list_macros" name="category_list"
							arg-selected="{$category.category_id}"
							arg-pathToSelected="{$categoryTree.getPathTo($selected)}"
							arg-children="{$categoryTree}"
							arg-extras="{$categoryExtras}"
							arg-isActive="{{ true }}" />
						<xf:else />
						<div class="block-row">{{ phrase('n_a') }}</div>
					</xf:if>
				</div>
			</div>
		</div>
	</xf:if>
</xf:sidenav>

<xf:page option="searchConstraints" value="{{ {
	phrase('xr_pm_products'): {'search_type': 'xr_pm_product'},
	phrase('xr_pm_this_category'): {'search_type': 'xr_pm_product', 'c': {'categories': [$category.category_id], 'child_categories': 1}}
} }}" />]]></template>
  <template type="public" title="xr_pm_filters" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:form action="{{ link($category ? 'products/categories/filters' : 'products/filters', $category) }}">
	<!--[XF:above_created_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('created_by:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="creator" value="{{ $creatorFilter ? $creatorFilter.username : '' }}" ac="single" />
		</div>
	</div>

	<!--[XF:above_sort_by]-->
	<div class="menu-row menu-row--separated">
		{{ phrase('sort_by:') }}
		<div class="inputGroup u-inputSpacer">
			<xf:select name="order" value="{{ $filters.order ?: 'last_update' }}">
				<xf:option value="last_update">{{ phrase('xr_pm_last_update') }}</xf:option>
				<xf:option value="product_date">{{ phrase('xr_pm_release_date') }}</xf:option>
				<xf:option value="title">{{ phrase('title') }}</xf:option>
			</xf:select>
			<span class="inputGroup-splitter"></span>
			<xf:select name="direction" value="{{ $filters.direction ?: 'desc' }}">
				<xf:option value="desc">{{ phrase('descending') }}</xf:option>
				<xf:option value="asc">{{ phrase('ascending') }}</xf:option>
			</xf:select>
		</div>
	</div>

	<div class="menu-footer">
		<span class="menu-footer-controls">
			<xf:button type="submit" class="button--primary">{{ phrase('filter') }}</xf:button>
		</span>
	</div>
	<xf:hiddenval name="apply">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="xr_pm_overview" version_id="2000032" version_string="2.0.0 Beta 2"><![CDATA[<xf:title>{{ phrase('xr_pm_products') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:products', null, {'page': $page}) }}" />

<div class="block">
	<div class="block-outer"><xf:trim>
		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="products" params="{$filters}"
			wrapperclass="block-outer-main" />
	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="xr_pm_overview_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="products"
			arg-creatorFilter="{$creatorFilter}" />

		<div class="block-body">
			<xf:if is="$products is not empty">
				<div class="structItemContainer">
					<xf:foreach loop="$products" value="$product">
						<xf:macro template="xr_pm_product_list_macros" name="product"
							arg-product="{$product}" />
					</xf:foreach>
				</div>
			<xf:elseif is="$filters" />
				<div class="block-row">{{ phrase('xr_pm_there_no_products_matching_your_filters') }}</div>
			<xf:else />
				<div class="block-row">{{ phrase('xr_pm_no_products_have_been_created_yet') }}</div>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="products" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('xr_pm_product_categories') }}</xf:page>

<xf:sidenav key="xrpmSideNav">
	<xf:if is="$categoryTree">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">{{ phrase('xr_pm_product_categories') }}</h3>
				<div class="block-body">
					<xf:if is="$categoryTree.count()">
						<xf:macro template="xr_pm_category_list_macros" name="category_list"
							arg-selected="{$selected}"
							arg-pathToSelected="{$categoryTree.getPathTo($selected)}"
							arg-children="{$categoryTree}"
							arg-extras="{$categoryExtras}"
							arg-isActive="{{ true }}" />
					<xf:else />
						<div class="block-row">{{ phrase('n_a') }}</div>
					</xf:if>
				</div>
			</div>
		</div>
	</xf:if>
</xf:sidenav>

<xf:page option="searchConstraints" value="{{ {
	phrase('xr_pm_products'): {'search_type': 'xr_pm_product'}
} }}" />]]></template>
  <template type="public" title="xr_pm_overview_macros" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro name="list_filter_bar" arg-filters="!" arg-baseLinkPath="!" arg-category="{{ null }}" arg-creatorFilter="{{ null }}">
	<xf:set var="$sortOrders" value="{{ {
		'last_update': phrase('xr_pm_last_update'),
		'product_date': phrase('xr_pm_release_date'),
		'download_count': phrase('xr_pm_downloads'),
		'title': phrase('title')
	} }}" />

	<div class="block-filterBar">
		<div class="filterBar">
			<xf:if contentcheck="true">
				<ul class="filterBar-filters">
					<xf:contentcheck>
						<xf:if is="$filters.creator_id AND $creatorFilter">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace('creator_id', null)) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('remove_this_filter')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('xr_pm_creator:') }}</span>
								{$creatorFilter.username}</a></li>
						</xf:if>
						<xf:if is="$filters.order AND {$sortOrders.{$filters.order}}">
							<li><a href="{{ link($baseLinkPath, $category, $filters|replace({'order': null, 'direction': null})) }}"
								class="filterBar-filterToggle" data-xf-init="tooltip" title="{{ phrase('return_to_default_order')|for_attr }}">
								<span class="filterBar-filterToggle-label">{{ phrase('sort_by:') }}</span>
								{$sortOrders.{$filters.order}}
								<i class="fa {{ $filters.direction == 'asc' ? 'fa-angle-up' : 'fa-angle-down' }}" aria-hidden="true"></i>
								<span class="u-srOnly"><xf:if is="$filters.direction == 'asc'">{{ phrase('ascending') }}<xf:else />{{ phrase('descending') }}</xf:if></span>
							</a></li>
						</xf:if>
					</xf:contentcheck>
				</ul>
			</xf:if>

			<a class="filterBar-menuTrigger" data-xf-click="menu" role="button" tabindex="0" aria-expanded="false" aria-haspopup="true">{{ phrase('filters') }}</a>
			<div class="menu menu--wide" data-menu="menu" aria-hidden="true"
				data-href="{{ link($baseLinkPath . '/filters', $category, $filters) }}"
				data-load-target=".js-filterMenuBody">
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_product_buy" version_id="2000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:title>{{ phrase('xr_pm_confirm_purchase:') }} {$product.product_title}</xf:title>

<xf:js addon="XR/PM" dev="xf/payment.js, xr/pm/buy.js" prod="xf/payment.min.js, xr/pm/buy.min.js" />

<xf:form action="{{ link('products/buy', $product) }}" ajax="true" class="block"
	data-xf-init="xrpm-product-buy"
	data-price="{$product.price}"
	data-currency-data="{{ xr_pm_currency_data($product.currency)|json }}"
>
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xr_pm_please_confirm_you_wish_to_buy_following_product') }}:
				<strong><a href="{{ link('products', $product) }}">{$product.product_title}</a></strong>
			</xf:inforow>

			<xf:macro template="xr_pm_purchase_macros" name="extras" arg-product="{$product}" />

			<xf:macro template="xr_pm_purchase_macros" name="coupons"
				arg-product="{$product}"
				arg-coupons="{$coupons}" arg-couponIds="{$couponIds}"
				arg-checker="{{ link('products/buy/coupon-checker', $product) }}" />

			<xf:macro template="xr_pm_purchase_macros" name="payment_profiles" arg-product="{$product}" arg-profiles="{$profiles}" />
		</div>
		<xf:submitrow rowtype="" icon="purchase" class="js-payButton"
			submit="{{ phrase('xr_pm_buy_for_x', {'price': $product.price|currency($product.currency)}) }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xr_pm_product_download" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$product.product_title} - {{ phrase('xr_pm_download') }}</xf:title>

<xf:form action="{{ link('products/download', $product) }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="purchase_version" label="{{ phrase('xr_pm_select_purchase_to_download_product') }}">
				<xf:foreach loop="$purchases" value="$purchase">
					<xf:set var="$firstVersion" value="{$purchase.downloadable_versions|first}" />
					<xf:option value="{$purchase.purchase_id}|{$firstVersion.product_version_id}">
						<xf:label>
							{$firstVersion.version_string} &middot; {$purchase.purchase_key}
							<xf:if is="$purchase.license_name">
								&middot; {$purchase.license_name}
							</xf:if>
						</xf:label>
					</xf:option>
				</xf:foreach>
				<xf:explain>{{ phrase('xr_pm_you_can_download_more_versions_from_your_purchases_page', {'link': link('products/purchases')}) }}</xf:explain>
			</xf:selectrow>
			<xf:if is="$product.confirm_license">
				<xf:checkboxrow>
					<xf:option name="confirmed">
						<xf:label>{{ phrase('xr_pm_i_agree_to_and_accept_terms_and_conditions_for_this_product', {'product': link('products/terms', $product)}) }}</xf:label>
					</xf:option>
				</xf:checkboxrow>
			</xf:if>
		</div>
		<xf:submitrow icon="download" submit="{{ phrase('download') }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xr_pm_product_field" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:title>{$product.product_title} - {$fieldDefinition.title}</xf:title>

<xf:wrap template="xr_pm_product_wrapper">
	<xf:set var="$pageSelected" value="field-{$fieldId}" />
</xf:wrap>

<div class="block">
	<div class="block-container">
		<div class="block-body block-row">
			<xf:macro template="custom_fields_macros" name="custom_field_value"
				arg-definition="{$fieldDefinition}"
				arg-value="{$fieldValue}" />
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xr_pm_product_list_macros" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:macro name="product"
	arg-product="!"
	arg-category="{{ null }}">

	<xf:css src="structured_list.less" />

	<div class="structItem structItem--product js-productListItem-{$product.product_id}" data-author="{{ $product.User.username ?: $product.username }}">
		<div class="structItem-cell structItem-cell--productThumb">
			<div class="structItem-iconContainer">
				{{ xr_pm_thumbnail($product, link('products', $product)) }}
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main structItem-cell--productMain" data-xf-init="touch-proxy">
			<div class="structItem-title">
				<a href="{{ link('products', $product) }}" data-tp-primary="on">{$product.product_title}</a>
				<span class="u-muted">{$product.Version.version_string}</span>
				<span class="label label--primary label--smallest">{$product.price|xr_pm_currency($product.currency)}</span>
			</div>

			<div class="structItem-minor">
				<xf:if contentcheck="true">
					<ul class="structItem-extraInfo">
						<xf:contentcheck>
							<xf:if is="{$extraInfo}">
								<li>{$extraInfo}</li>
							</xf:if>
						</xf:contentcheck>
					</ul>
				</xf:if>

				<ul class="structItem-parts">
					<li><xf:username user="$product.User" defaultname="{$product.username}" /></li>
					<li class="structItem-startDate"><a href="{{ link('products', $product) }}" rel="nofollow"><xf:date time="{$product.product_date}" /></a></li>
					<xf:if is="$product.category_id">
						<li><a href="{{ link('products/categories', $product.Category) }}">{$product.Category.title}</a></li>
					</xf:if>
				</ul>
			</div>

			<div class="structItem-productInfo">
				{$product.product_tag_line}
				<xf:if is="$product.features">
					<ul>
						<xf:foreach loop="$product.features" value="$feature" i="$i">
							<xf:if is="$i <= 4">
								<li>{$feature}</li>
							</xf:if>
						</xf:foreach>
					</ul>
				</xf:if>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--productMeta">
			<xf:if is="$product.canPurchase()">
				<xf:button icon="purchase" class="button--product button--cta" href="{{ link('products/buy', $product) }}" data-xf-click="overlay">
					<xf:if is="$product.price">
						{{ phrase('xr_pm_buy_now') }}
					<xf:else />
						{{ phrase('xr_pm_get_free_now') }}
					</xf:if>
				</xf:button>
			</xf:if>
			<xf:button class="button--product" href="{{ link('products', $product) }}">{{ phrase('xr_pm_more_info') }}</xf:button>
			<dl class="pairs pairs--justified structItem-minor">
				<dt>{{ phrase('updated') }}</dt>
				<dd><a href="{{ link('products/changelog', $product) }}" class="u-concealed"><xf:date time="{$product.last_update}" /></a></dd>
			</dl>
			<xf:if is="$product.duration">
				<dl class="pairs pairs--justified structItem-minor">
					<dt>{{ phrase('xr_pm_license_duration') }}</dt>
					<dd>
						<xf:if is="$product.duration_unit == 'days'">
							{{ phrase('x_days', {'days': $product.duration}) }}
						<xf:elseif is="$product.duration_unit == 'months'" />
							{{ phrase('x_months', {'months': $product.duration}) }}
						<xf:elseif is="$product.duration_unit == 'years'" />
							{{ phrase('x_years', {'years': $product.duration}) }}
						</xf:if>
					</dd>
				</dl>
			</xf:if>
			<xf:if is="$product.isRenewable()">
				<dl class="pairs pairs--justified structItem-minor">
					<dt>{{ phrase('xr_pm_renewal_price') }}</dt>
					<dd>
						{$product.renew_price|currency($product.currency)}
					</dd>
				</dl>
			</xf:if>
		</div>
	</div>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_product_overview_macros" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:macro template="xr_pm_product_overview_macros" name="field_view" arg-group="!" arg-product="!">
	<xf:foreach loop="$xf.app.getCustomFields('xr_pm_products', $group)" key="$fieldId" value="$fieldDefinition">
		<xf:if contentcheck="true">
			<div class="block">
				<div class="block-container">
					<div class="block-minorHeader">
						{$fieldDefinition.title}
					</div>
					<div class="block-body block-row">
						<xf:contentcheck>
							<xf:if is="$fieldDefinition.hasValue({$product.custom_fields.{$fieldDefinition.field_id}})">
								<xf:macro template="custom_fields_macros" name="custom_field_value"
									arg-definition="{$fieldDefinition}"
									arg-value="{$product.custom_fields.{$fieldDefinition.field_id}}" />
							</xf:if>
						</xf:contentcheck>
					</div>
				</div>
			</div>
		</xf:if>
	</xf:foreach>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_product_page_macros" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:macro name="product_page_options" arg-category="!" arg-product="{{ null }}">
	<xf:page option="productCategory" value="{$category}" />

	<xf:comment><!-- TODO: Product search --></xf:comment>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_product_product_purchases" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$product.product_title} - {{ phrase('xr_pm_your_purchases') }}</xf:title>

<xf:wrap template="xr_pm_product_wrapper">
	<xf:set var="$pageSelected" value="purchases" />
</xf:wrap>

<xf:macro template="xr_pm_product_purchases" name="purchase_list" arg-purchaseStates="{$purchaseStates}" arg-purchasesGrouped="{$purchasesGrouped}" />]]></template>
  <template type="public" title="xr_pm_product_purchases" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:title>{{ phrase('xr_pm_your_purchases') }}</xf:title>

<xf:macro name="purchase_list" arg-purchaseStates="{$purchaseStates}" arg-purchasesGrouped="{$purchasesGrouped}" />

<xf:macro name="purchase_list" arg-purchaseStates="!" arg-purchasesGrouped="!">
	<xf:css src="structured_list.less" />

	<xf:foreach loop="$purchaseStates" key="$key" value="$phrases" if="{$purchasesGrouped.{$key}} is not empty">
		<div class="block">
			<div class="block-container">
				<h3 class="block-header">
					{$phrases.label}
					<span class="block-desc">
					{$phrases.explain}
				</span>
				</h3>
				<div class="block-body">
					<div class="structItemContainer">
						<xf:foreach loop="{$purchasesGrouped.{$key}}" value="$purchase">
							<xf:macro name="purchase" arg-purchase="{$purchase}" />
						</xf:foreach>
					</div>
				</div>
			</div>
		</div>
	<xf:else />
		<div class="blockMessage">
			{{ phrase('xr_pm_you_havent_made_any_valid_purchases_yet') }}
		</div>
	</xf:foreach>
</xf:macro>

<xf:macro name="purchase" arg-purchase="!">
	<div class="structItem" data-author="{{ $purchase.User.username ?: $purchase.username }}">
		<div class="structItem-cell structItem-cell--productThumb structItem-cell--productThumb--medium">
			<div class="structItem-iconContainer">
				{{ xr_pm_thumbnail($purchase.Product, link('products/purchase', $purchase), 'xrpmThumbnail--medium') }}
			</div>
		</div>
		<div class="structItem-cell structItem-cell--main structItem-cell--productMain" data-xf-init="touch-proxy">
			<div class="structItem-title">
				<a href="{{ link('products/purchase', $purchase) }}" data-tp-primary="on">{$purchase.Product.product_title} - {$purchase.purchase_key}</a>
				<span class="label label--primary">{$purchase.total_price|xr_pm_currency($purchase.purchase_currency)}</span>
			</div>
			<div class="structItem-minor">
				<ul class="structItem-parts">
					<li><a href="{{ link('products', $purchase.Product) }}">{$purchase.Product.product_title}</a></li>
					<xf:if is="$purchase.hasLicenseDetails()">
						<li>{$purchase.license_name}</li>
						<li><a href="{$purchase.license_url}" target="_blank">{$purchase.license_url}</a></li>
					</xf:if>
				</ul>
			</div>
			<div class="structItem-productInfo">
				{$purchase.Product.product_tag_line}
				<ul>
					<xf:if is="$purchase.displayable_extras">
						<xf:foreach loop="$purchase.displayable_extras" value="$extra">
							<li>{$extra.extra_title}</li>
						</xf:foreach>
					<xf:elseif is="$purchase.purchase_state != 'expired'" />
						<li>
							{{ phrase('xr_pm_no_optional_extras_purchased') }}
						</li>
					</xf:if>
					<xf:if is="$purchase.canPurchaseExtras()">
						<li>
							<a href="{{ link('products/purchase/extras', $purchase) }}" data-xf-click="overlay">{{ phrase('xr_pm_purchase_extras') }}</a>
						</li>
					</xf:if>
				</ul>
			</div>
		</div>
		<div class="structItem-cell structItem-cell--productMeta">
			<xf:macro template="xr_pm_purchase_macros" name="purchase_buttons" arg-purchase="{$purchase}" />
			<dl class="pairs pairs--justified structItem-minor">
				<dt>{{ phrase('xr_pm_purchase_date') }}</dt>
				<dd><xf:date time="{$purchase.purchase_date}" /></dd>
			</dl>
			<xf:if is="$purchase.expiry_date > 0">
				<dl class="pairs pairs--justified structItem-minor">
					<dt>{{ phrase('xr_pm_expiry_date') }}</dt>
					<dd><xf:date time="{$purchase.expiry_date}" /></dd>
				</dl>
			<xf:else />
				<dl class="pairs pairs--justified structItem-minor">
					<dt>{{ phrase('xr_pm_expiry_date') }}</dt>
					<dd>{{ phrase('never') }}</dd>
				</dl>
			</xf:if>
			<xf:if is="$purchase.Product.isRenewable()">
				<dl class="pairs pairs--justified structItem-minor">
					<dt>{{ phrase('xr_pm_renewal_price') }}</dt>
					<dd>
						{$purchase.renew_price|currency($purchase.purchase_currency)}
					</dd>
				</dl>
			</xf:if>
		</div>
	</div>
</xf:macro>

<xf:page option="searchConstraints" value="{{ {
	phrase('xr_pm_products'): {'search_type': 'xr_pm_product'}
} }}" />]]></template>
  <template type="public" title="xr_pm_product_terms" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$product.product_title} - {{ phrase('xr_pm_terms_and_conditions') }}</xf:title>

<xf:wrap template="xr_pm_product_wrapper">
	<xf:set var="$pageSelected" value="terms" />
</xf:wrap>

<div class="block">
	<div class="block-container">
		<div class="block-body block-row">
			{{ bb_code($terms, 'xr_pm_product_terms', $product) }}
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xr_pm_product_updates" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$product.product_title} - {{ phrase('xr_pm_updates') }}</xf:title>

<xf:wrap template="xr_pm_product_wrapper">
	<xf:set var="$pageSelected" value="updates" />
</xf:wrap>

<div class="block block--messages">
	<div class="block-container">
		<div class="block-body">
			<xf:foreach loop="$versions" value="$version">
				<xf:css src="message.less" />
				<xf:if is="$version.version_details">
					<div class="message message--simple">
					<span class="u-anchorTarget" id="version-{$version.product_version_id}"></span>
					<div class="message-inner">
						<div class="message-cell message-cell--main">
							<div class="message-content">
								<div class="message-attribution">
									<h2 class="message-attribution-main block-textHeader">
										{$version.Product.product_title} {$version.version_string}
									</h2>
									<span class="message-attribution-opposite">
										<a href="{{ link('products/version', $version) }}" class="u-concealed" rel="nofollow"><xf:date time="{$version.release_date}" /></a>
									</span>
								</div>

								<div class="message-userContent">
									<article class="message-body">
										{{ bb_code($version.version_details, 'xr_pm_version', $version) }}
										<xf:if is="$version.changelog">
											<ul>
												<xf:foreach loop="$version.changelog" value="$changelog" if="$changelog">
													<li>{$changelog}</li>
												</xf:foreach>
											</ul>
										</xf:if>
									</article>
								</div>
							</div>
						</div>
					</div>
				</div>
				</xf:if>
			</xf:foreach>
		</div>
	</div>
</div>]]></template>
  <template type="public" title="xr_pm_product_view" version_id="2000033" version_string="2.0.0 Beta 3"><![CDATA[<xf:title>{$product.product_title}</xf:title>

<xf:set var="$descSnippet" value="{{ snippet($product.product_tag_line, 250, {'stripBbCode': true}) }}" />

<xf:macro template="metadata_macros" name="metadata"
	arg-description="{$descSnippet}"
	arg-shareUrl="{{ link('canonical:products', $product) }}"
	arg-canonicalUrl="{{ link('canonical:products', $product) }}" />

<xf:page option="ldJsonHtml">
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "Product",
		"@id": "{{ link('canonical:products', $product)|escape('json') }}",
		"name": "{$product.product_title|escape('json')}",
		"description": "{$descSnippet|escape('json')}",
		<xf:if is="$product.has_thumbnail">
			"image": "{$product.getThumbnailUrl(true)}",
		</xf:if>
		"releaseDate": "{{ date($product.last_update, 'c')|escape('json') }}"
	}
	</script>
</xf:page>

<xf:wrap template="xr_pm_product_wrapper">
	<xf:set var="$pageSelected" value="overview" />
</xf:wrap>

<xf:macro template="lightbox_macros" name="setup" arg-canViewAttachments="{{ $product.canViewProductImages() }}" />

<div class="blockMessage">
	<div class="pairJustifier">
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('xr_pm_release_date') }}</dt>
			<dd>
				<xf:date time="{$product.product_date}" />
			</dd>
		</dl>
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('xr_pm_last_update') }}</dt>
			<dd>
				<xf:date time="{$product.last_update}" />
			</dd>
		</dl>
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('price') }}</dt>
			<dd>
				{$product.price|xr_pm_currency($product.currency)}
			</dd>
		</dl>
		<xf:if is="$product.duration">
			<dl class="pairs pairs--rows pairs--rows--centered">
				<dt>{{ phrase('xr_pm_initial_support') }}</dt>
				<dd>
					<xf:if is="$product.duration_unit == 'days'">
						{{ phrase('x_days', {'days': $product.duration}) }}
					<xf:elseif is="$product.duration_unit == 'months'" />
						{{ phrase('x_months', {'months': $product.duration}) }}
					<xf:elseif is="$product.duration_unit == 'years'" />
						{{ phrase('x_years', {'years': $product.duration}) }}
					</xf:if>
				</dd>
			</dl>
		</xf:if>
		<xf:if is="$product.isRenewable()">
			<dl class="pairs pairs--rows pairs--rows--centered">
				<dt>{{ phrase('xr_pm_renewal_price') }}</dt>
				<dd>
					{$product.renew_price|currency($product.currency)}
				</dd>
			</dl>
		</xf:if>
	</div>
</div>

<div class="block">
	<div class="block-container">
		<h3 class="block-minorHeader">{{ phrase('xr_pm_feature_summary') }}</h3>
		<div class="block-body">
			<ul class="listFeatures">
				<xf:foreach loop="$product.features" value="$feature">
					<li>{$feature}</li>
				</xf:foreach>
			</ul>
		</div>
	</div>
</div>

<xf:macro template="xr_pm_product_overview_macros" name="field_view"
	arg-group="above_details"
	arg-product="{$product}"
/>

<div class="block">
	<div class="block-container">
		<h3 class="block-minorHeader">{{ phrase('xr_pm_product_details') }}</h3>
		<div class="block-body block-row lbContainer js-productDetails"
			data-xf-init="lightbox"
			data-lb-id="product-{$product.product_id}"
			data-lb-caption-desc="{{ $product.User ? $product.User.username : $product.username }} &middot; {{ date_time($product.product_date) }}">

			<article class="js-lbContainer">
				{{ bb_code($product.product_details, 'xr_pm_product_details', $product) }}

				<xf:if is="$product.attach_count">
					<div class="u-inputSpacer"></div>
					<xf:if contentcheck="true">
						<xf:css src="attachments.less" />
						<ul class="attachmentList">
							<xf:contentcheck>
								<xf:foreach loop="$product.Images" value="$image" if="!$product.isAttachmentEmbedded($image)">
									<xf:macro template="attachment_macros" name="attachment_list_item"
										arg-attachment="{$image}"
										arg-canView="{{ $product.canViewProductImages() }}" />
								</xf:foreach>
							</xf:contentcheck>
						</ul>
					</xf:if>
				</xf:if>
			</article>
		</div>
	</div>
</div>

<xf:macro template="xr_pm_product_overview_macros" name="field_view"
	arg-group="below_details"
	arg-product="{$product}"
/>]]></template>
  <template type="public" title="xr_pm_product_wrapper" version_id="2000032" version_string="2.0.0 Beta 2"><![CDATA[<xf:h1 hidden="true" />

<xf:if is="$product.category_id">
	<xf:breadcrumb source="$product.Category.getBreadcrumbs()" />
</xf:if>

<xf:macro template="xr_pm_product_page_macros" name="product_page_options"
	arg-category="{$product.Category}"
	arg-product="{$product}" />

<xf:macro template="xr_pm_product_wrapper_macros" name="header"
	arg-product="{$product}" />

<xf:macro template="xr_pm_product_wrapper_macros" name="tabs"
	arg-product="{$product}"
	arg-selected="{$pageSelected}" />

{$innerContent|raw}]]></template>
  <template type="public" title="xr_pm_product_wrapper_macros" version_id="2000070" version_string="2.0.0"><![CDATA[<xf:macro name="header"
	arg-product="!"
	arg-showMeta="{{ true }}">

	<xf:page option="searchConstraints" value="{{ {
		phrase('xr_pm_products'): {'search_type': 'xr_pm_product'},
		phrase('xr_pm_this_category'): {'search_type': 'xr_pm_product', 'c': {'categories': [$product.Category.category_id], 'child_categories': 1}}
	} }}" />

	<xf:page option="headerHtml">
		<div class="contentRow contentRow--alignMiddle contentRow--hideFigureNarrow">
			<span class="contentRow-figure">
				{{ xr_pm_thumbnail($product, '', 'xrpmThumbnail--small') }}
			</span>
			<div class="contentRow-main">
				<div class="p-title">
					<h1 class="p-title-value">
						{$product.product_title}
						<span class="u-muted">{$product.Version.version_string}</span>
					</h1>
					<div class="p-title-pageAction">
						<xf:if is="$product.canDownload()">
							<xf:button icon="download" class="button--product button--cta" href="{{ link('products/download', $product) }}" data-xf-click="overlay">{{ phrase('xr_pm_download') }}</xf:button>
						</xf:if>
						<xf:if is="$product.canPurchase()">
							<xf:button icon="purchase" class="button--product button--cta" href="{{ link('products/buy', $product) }}" data-xf-click="overlay">
								<xf:if is="$product.price">
									{{ phrase('xr_pm_buy_now') }}
								<xf:else />
									{{ phrase('xr_pm_get_free_now') }}
								</xf:if>
							</xf:button>
						</xf:if>
					</div>
				</div>
				<xf:if is="$showMeta">
					<div class="p-description">
						<ul class="listInline listInline--bullet">
							<li>
								<i class="fa fa-user" aria-hidden="true" title="{{ phrase('author')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('author') }}</span>

								<xf:username user="{$product.User}" defaultname="{$product.username}" class="u-concealed" />
							</li>
							<li>
								<i class="fa fa-clock-o" aria-hidden="true" title="{{ phrase('xr_pm_first_release')|for_attr }}"></i>
								<span class="u-srOnly">{{ phrase('xr_pm_first_release') }}</span>

								<a href="{{ link('products', $product) }}" class="u-concealed"><xf:date time="{$product.product_date}" /></a>
							</li>
						</ul>
					</div>
				</xf:if>
			</div>
		</div>
	</xf:page>
</xf:macro>

<xf:macro name="tabs" arg-product="!" arg-selected="!">
	<div class="tabs tabs--standalone tabs--product">
		<div class="hScroller" data-xf-init="h-scroller">
			<span class="hScroller-scroll">
				<a class="tabs-tab {{ $selected == 'overview' ? 'is-active' : '' }}" href="{{ link('products', $product) }}">{{ phrase('overview') }}</a>
				<xf:if contentcheck="true">
					<xf:contentcheck>
						<xf:foreach loop="$xf.app.getCustomFields('xr_pm_products', 'tab_content')" key="$fieldId" value="$fieldDefinition">
							<xf:if is="$fieldDefinition.hasValue({$product.custom_fields.{$fieldDefinition.field_id}})">
								<a class="tabs-tab {{ $selected == 'field-' . $fieldId ? 'is-active' : '' }}" href="{{ link('products/field', $product, {'field': $fieldId}) }}">
									{$fieldDefinition.title}
								</a>
							</xf:if>
						</xf:foreach>
					</xf:contentcheck>
				</xf:if>
				<a class="tabs-tab {{ $selected == 'updates' ? 'is-active' : '' }}" href="{{ link('products/updates', $product) }}">{{ phrase('xr_pm_updates') }}</a>
				<xf:if is="$xf.visitor.user_id">
					<a class="tabs-tab {{ $selected == 'purchases' ? 'is-active' : '' }}" href="{{ link('products/product-purchases', $product) }}">{{ phrase('xr_pm_your_purchases') }}</a>
				</xf:if>
				<a class="tabs-tab {{ $selected == 'terms' ? 'is-active' : '' }}" href="{{ link('products/terms', $product) }}">{{ phrase('xr_pm_terms_and_conditions') }}</a>
			</span>
		</div>
		<xf:if contentcheck="true">
			<div class="tabs-extra">
				<xf:contentcheck>
					<xf:foreach loop="$xf.app.getCustomFields('xr_pm_products', 'tab_link')" key="$fieldId" value="$fieldDefinition">
						<xf:if is="$fieldDefinition.hasValue({$product.custom_fields.{$fieldDefinition.field_id}})">
							<a class="tabs-tab" target="_blank" href="{$product.custom_fields.{$fieldDefinition.field_id}}">
								<i class="fa fa-external-link-square"></i> {$fieldDefinition.title}
							</a>
						</xf:if>
					</xf:foreach>
				</xf:contentcheck>
			</div>
		</xf:if>
	</div>
</xf:macro>

<xf:macro name="sidebar" arg-product="!">
	<xf:sidebar key="productInfo">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xr_pm_product_information') }}</h3>
				<div class="block-body block-row">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xr_pm_release_date') }}</dt>
						<dd>
							<xf:date time="{$product.product_date}" />
						</dd>
					</dl>
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('xr_pm_last_update') }}</dt>
						<dd>
							<xf:date time="{$product.last_update}" />
						</dd>
					</dl>
				</div>
			</div>
		</div>
	</xf:sidebar>

	<xf:sidebar key="licenseInfo">
		<div class="block">
			<div class="block-container">
				<h3 class="block-minorHeader">{{ phrase('xr_pm_license_information') }}</h3>
				<div class="block-body block-row">
					<dl class="pairs pairs--justified">
						<dt>{{ phrase('price') }}</dt>
						<dd>
							{$product.price|xr_pm_currency($product.currency)}
						</dd>
					</dl>
					<xf:if is="$product.renew_price">
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xr_pm_renewal_price') }}</dt>
							<dd>
								{$product.renew_price|currency($product.currency)}
							</dd>
						</dl>
					</xf:if>
					<xf:if is="$product.duration">
						<dl class="pairs pairs--justified">
							<dt>{{ phrase('xr_pm_initial_support') }}</dt>
							<dd>
								<xf:if is="$product.duration_unit == 'days'">
									{{ phrase('x_days', {'days': $product.duration}) }}
								<xf:elseif is="$product.duration_unit == 'months'" />
									{{ phrase('x_months', {'months': $product.duration}) }}
								<xf:elseif is="$product.duration_unit == 'years'" />
									{{ phrase('x_years', {'years': $product.duration}) }}
								</xf:if>
							</dd>
						</dl>
					</xf:if>
				</div>
			</div>
		</div>
	</xf:sidebar>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_purchase_activate" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_activate:') }} {$product.product_title} - {$purchase.purchase_key}</xf:title>

<xf:breadcrumb source="{$purchase.getBreadcrumbs(true)}" />

<xf:form action="{{ link('products/purchase/activate', $purchase) }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:textboxrow label="{{ phrase('xr_pm_license_name') }}" name="license_name" value="{$purchase.license_name}" required="required" />
			<xf:textboxrow type="url" label="{{ phrase('xr_pm_license_url') }}" name="license_url" value="{$purchase.license_url}" required="required">
				<xf:explain>
					{{ phrase('xr_pm_license_name_url_explain') }}
				</xf:explain>
			</xf:textboxrow>
		</div>
		<xf:submitrow icon="vote" submit="{{ phrase('xr_pm_activate') }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xr_pm_purchase_coupons.less" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[]]></template>
  <template type="public" title="xr_pm_purchase_download" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('xr_pm_download:') }} {$product.product_title} - {$purchase.purchase_key}</xf:title>

<xf:breadcrumb source="{$purchase.getBreadcrumbs(true)}" />

<xf:form action="{{ link('products/purchase/download', $purchase) }}" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:selectrow name="product_version_id" label="{{ phrase('xr_pm_pick_version_to_download') }}" value="{$product.current_version_id}">
				<xf:options source="{$versions}" />
				<xf:explain>
					<xf:if is="$firstVersionId != $product.current_version_id">
						{{ phrase('xr_pm_there_newer_but_unsupported_versions_available') }}
					</xf:if>
				</xf:explain>
			</xf:selectrow>
			<xf:if is="$product.confirm_license">
				<xf:checkboxrow>
					<xf:option name="confirmed">
						<xf:label>{{ phrase('xr_pm_i_agree_to_and_accept_terms_and_conditions_for_this_product', {'product': link('products/terms', $product)}) }}</xf:label>
					</xf:option>
				</xf:checkboxrow>
			</xf:if>
			<xf:submitrow icon="download" submit="{{ phrase('download') }}" />
		</div>
	</div>
</xf:form>]]></template>
  <template type="public" title="xr_pm_purchase_extras" version_id="2000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:title>{{ phrase('xr_pm_confirm_extras_purchase:') }} {$product.product_title} - {$purchase.purchase_key}</xf:title>

<xf:js addon="XR/PM" dev="xf/payment.js, xr/pm/buy.js" prod="xf/payment.min.js, xr/pm/buy.min.js" />

<xf:breadcrumb source="{$purchase.getBreadcrumbs(true)}" />

<xf:form action="{{ link('products/purchase/extras', $purchase) }}" ajax="true" class="block"
	data-xf-init="xrpm-product-buy"
	data-currency-data="{{ xr_pm_currency_data($purchase.purchase_currency)|json }}"
	data-purchase-type="extra"
>
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('xr_pm_please_select_optional_extras_you_would_like_to_buy') }}
				<strong><a href="{{ link('products/purchase', $purchase) }}">{$product.product_title} - {$purchase.purchase_key}</a></strong>
			</xf:inforow>

			<xf:macro template="xr_pm_purchase_macros" name="extras" arg-product="{$product}" arg-purchase="{$purchase}" arg-value="{$extraId}" />

			<xf:macro template="xr_pm_purchase_macros" name="coupons"
				arg-product="{$product}"
				arg-coupons="{$coupons}" arg-couponIds="{$couponIds}"
				arg-checker="{{ link('products/purchase/extras/coupon-checker', $purchase) }}" />

			<xf:macro template="xr_pm_purchase_macros" name="payment_profiles" arg-product="{$product}" arg-profiles="{$profiles}" />
		</div>
		<xf:submitrow rowtype="" icon="purchase" class="js-payButton"
			submit="{{ phrase('xr_pm_buy_for_x', {'price': 0.00|currency($product.currency)}) }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xr_pm_purchase_macros" version_id="2000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:macro name="purchase_buttons" arg-purchase="!" arg-forceRenewButton="{{ false }}">
	<xf:if is="$purchase.doesRequireRenewal() || $forceRenewButton">
		<xf:button icon="refresh" class="button--product button--cta" href="{{ link('products/purchase/renew', $purchase) }}" data-xf-click="overlay">{{ phrase('xr_pm_renew') }}</xf:button>
	</xf:if>
	<xf:if is="$purchase.isDownloadable()">
		<xf:button icon="download" class="button--product button--cta" href="{{ link('products/purchase/download', $purchase) }}" data-xf-click="overlay">{{ phrase('xr_pm_download') }}</xf:button>
	</xf:if>
	<xf:if is="$purchase.doesRequireActivation()">
		<xf:button icon="vote" class="button--product button--cta" href="{{ link('products/purchase/activate', $purchase) }}" data-xf-click="overlay">{{ phrase('xr_pm_activate') }}</xf:button>
	</xf:if>
	<xf:if is="$purchase.isActivatable() AND ($purchase.purchase_state != 'inactive' AND $purchase.purchase_state != 'expired')">
		<xf:button icon="edit" class="button--product" href="{{ link('products/purchase/activate', $purchase) }}" data-xf-click="overlay">{{ phrase('xr_pm_edit_details') }}</xf:button>
	</xf:if>
</xf:macro>

<xf:macro name="coupons" arg-product="!" arg-checker="!" arg-coupons="" arg-couponIds="{{ [] }}">
	<xf:if is="$product.canUseCoupons()">
		<xf:css src="xr_pm_purchase_coupons.less" />

		<xf:formrow rowtype="input" label="{{ phrase('xr_pm_coupon_code') }}" rowclass="js-coupon" data-checker="{$checker}">
			<div class="inputGroup">
				<xf:textbox name="coupon_code" class="js-couponCode" />
				<div class="inputGroup-splitter"></div>
				<xf:button icon="confirm" class="button--small js-checkCoupon" />
			</div>
			<div class="formRow-explain">
				<ul class="js-couponList listInline"></ul>
			</div>
			<xf:hiddenval name="coupon_ids" value="{$couponIds|json}" class="js-coupons" />
		</xf:formrow>
	</xf:if>
</xf:macro>

<xf:macro name="extras" arg-product="!" arg-purchase="" arg-value="">
	<xf:set var="$extras">
		<xf:checkboxrow label="{{ phrase('xr_pm_customize_purchase') }}" name="extras" listclass="js-extras" value="{$value}">
			<xf:foreach loop="$product.extras" key="$extraId" value="$extra" if="!$purchase OR in_array($extraId, $purchase.getUnpurchasedExtras())">
				<xf:option value="{$extraId}" data-price="{$extra.extra_price}">
					<xf:label><span class="label label--primary label--smallest">{$extra.extra_price|xr_pm_currency($purchase ? $purchase.purchase_currency : $product.currency)}</span> {$extra.extra_title}</xf:label>
					<xf:hint>
						{$product.getExtraDescription($extra)}
						<xf:if is="$product.isRenewable() && $extra.extra_renew_price">
							<div class="inputChoices-spacer u-featuredText">{{ phrase('xr_pm_purchasing_this_extra_item_will_add_additional_x', {'extra_renew_price': $extra.extra_renew_price|currency($purchase ? $purchase.purchase_currency : $product.currency)}) }}</div>
						</xf:if>
					</xf:hint>
				</xf:option>
			</xf:foreach>
			<xf:explain>{{ phrase('xr_pm_you_can_purchase_extras_at_later_date_if_you_do_not_wish_to_purchase_now') }}</xf:explain>
		</xf:checkboxrow>
	</xf:set>
	<xf:if is="$purchase && $purchase.getUnpurchasedExtras()">
		{$extras|raw}
	<xf:elseif is="!$purchase && $product.extras is not empty" />
		{$extras|raw}
	</xf:if>
</xf:macro>

<xf:macro name="payment_profiles" arg-product="!" arg-profiles="!">
	<xf:if is="{{ count($product.payment_profile_ids) > 1 }}">
		<xf:selectrow label="{{ phrase('xr_pm_pay_using') }}" name="payment_profile_id">
			<xf:option>{{ phrase('(choose_payment_method)') }}</xf:option>
			<xf:foreach loop="$product.payment_profile_ids" value="$profileId">
				<xf:option value="{$profileId}">{$profiles.{$profileId}}</xf:option>
			</xf:foreach>
		</xf:selectrow>
	<xf:else />
		<xf:hiddenval name="payment_profile_id">{$product.payment_profile_ids|first}</xf:hiddenval>
	</xf:if>
</xf:macro>]]></template>
  <template type="public" title="xr_pm_purchase_renew" version_id="2000035" version_string="2.0.0 Beta 5"><![CDATA[<xf:title>{{ phrase('xr_pm_confirm_renewal:') }} {$product.product_title} - {$purchase.purchase_key}</xf:title>

<xf:js addon="XR/PM" dev="xf/payment.js, xr/pm/buy.js" prod="xf/payment.min.js, xr/pm/buy.min.js" />
<xf:breadcrumb source="{$purchase.getBreadcrumbs(true)}" />

<xf:form action="{{ link('products/purchase/renew', $purchase) }}" ajax="true" class="block"
	data-xf-init="xrpm-product-buy"
	data-price="{$purchase.renew_price}"
	data-phrase="xr_pm_renew_for_x"
	data-currency-data="{{ xr_pm_currency_data($purchase.purchase_currency)|json }}"
>
	<div class="block-container">
		<div class="block-body">
			<xf:if is="$purchase.isVeryEarlyRenewal()">
				<div class="block-row">
					<div class="block-rowMessage block-rowMessage--warning">
						{{ phrase('xr_pm_this_purchase_has_been_renewed_recently_warning') }}
					</div>
				</div>
			</xf:if>

			<xf:inforow rowtype="confirm">
				{{ phrase('xr_pm_please_confirm_you_wish_to_renew_following_purchase') }}:
				<strong><a href="{{ link('products/purchase', $purchase) }}">{$product.product_title} - {$purchase.purchase_key}</a></strong>
			</xf:inforow>

			<xf:macro template="xr_pm_purchase_macros" name="coupons"
				arg-product="{$product}"
				arg-coupons="{$coupons}" arg-couponIds="{$couponIds}"
				arg-checker="{{ link('products/purchase/renew/coupon-checker', $purchase) }}" />

			<xf:macro template="xr_pm_purchase_macros" name="payment_profiles" arg-product="{$product}" arg-profiles="{$profiles}" />
		</div>
		<xf:submitrow rowtype="" icon="purchase" class="js-payButton"
			submit="{{ phrase('xr_pm_renew_for_x', {'price': $purchase.renew_price|currency($purchase.purchase_currency)}) }}" />
	</div>
</xf:form>]]></template>
  <template type="public" title="xr_pm_purchase_view" version_id="2000010" version_string="2.0.0 Alpha"><![CDATA[<xf:title>{$purchase.Product.product_title} - {$purchase.purchase_key}</xf:title>

<xf:description><xf:trim>
	<xf:if is="$purchase.hasLicenseDetails()">
		<ul class="listInline listInline--bullet">
			<li>{$purchase.license_name}</li>
			<li><a href="{$purchase.license_url}" target="_blank">{$purchase.license_url}</a></li>
		</ul>
	</xf:if>
</xf:trim></xf:description>

<xf:breadcrumb source="{$purchase.getBreadcrumbs()}" />

<xf:pageaction>
	<xf:macro template="xr_pm_purchase_macros" name="purchase_buttons" arg-purchase="{$purchase}" arg-forceRenewButton="{$purchase.isRenewableEarly()}" />
</xf:pageaction>

<xf:if is="$purchase.doesRequireActivation()">
	<div class="blockMessage blockMessage--important">
		{{ phrase('xr_pm_before_download_must_activate_by_clicking_here', {'purchase': link('products/purchase/activate', $purchase)}) }}
	</div>
</xf:if>

<xf:if is="$renewPurchase">
	<div class="blockMessage blockMessage--success blockMessage--iconic">
		{{ phrase('xr_pm_thank_you_for_renewing_this_purchase') }}
	</div>
<xf:elseif is="$purchase.doesRequireRenewal()" />
	<div class="blockMessage blockMessage--important">
		{{ phrase('xr_pm_this_product_has_expired_can_renew_by_clicking_here', {'purchase': link('products/purchase/renew', $purchase)}) }}
	</div>
</xf:if>

<xf:if is="$extrasPurchase">
	<div class="blockMessage blockMessage--success blockMessage--iconic">
		{{ phrase('xr_pm_thank_you_for_buying_extras_for_this_purchase_success') }}
	</div>
</xf:if>

<div class="blockMessage">
	<div class="pairJustifier">
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('xr_pm_purchase_date') }}</dt>
			<dd>
				<xf:date time="{$purchase.purchase_date}" />
			</dd>
		</dl>
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('xr_pm_expiry_date') }}</dt>
			<dd>
				<xf:if is="$purchase.expiry_date > 0">
					<xf:date time="{$purchase.expiry_date}" />
					<xf:else />
					{{ phrase('never') }}
				</xf:if>
			</dd>
		</dl>
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('xr_pm_purchase_state') }}</dt>
			<dd>
				{$purchaseStates.{$purchase.purchase_state}.label}
			</dd>
		</dl>
		<dl class="pairs pairs--rows pairs--rows--centered">
			<dt>{{ phrase('xr_pm_purchase_price') }}</dt>
			<dd>
				{$purchase.total_price|xr_pm_currency($purchase.purchase_currency)}
			</dd>
		</dl>
		<xf:if is="$purchase.Product.isRenewable()">
			<dl class="pairs pairs--rows pairs--rows--centered">
				<dt>{{ phrase('xr_pm_renewal_price') }}</dt>
				<dd>
					{$purchase.renew_price|currency($purchase.purchase_currency)}
				</dd>
			</dl>
		</xf:if>
		<xf:if is="$purchase.hasCoupons()">
			<dl class="pairs pairs--rows pairs--rows--centered">
				<dt>{{ phrase('xr_pm_discount_total') }}</dt>
				<dd>
					{$purchase.discount_total|currency($purchase.purchase_currency)}
				</dd>
			</dl>
		</xf:if>
	</div>
</div>

<xf:if is="$purchase.extras">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('xr_pm_purchased_extras') }}</h3>
			<div class="block-body block-body--purchase">
				<xf:foreach loop="$purchase.extras" key="$extraId" value="$extra">
					<xf:set var="$fullExtra" value="{$purchase.Product.extras.{$extraId}}" />
					<xf:if is="$fullExtra">
						<div class="block-row block-row--separated">
							<div class="contentRow">
								<div class="contentRow-main">
									<h2 class="contentRow-title">{$fullExtra.extra_title} <span class="label label--primary">{$extra.extra_price|xr_pm_currency($purchase.purchase_currency)}</span></h2>
									<div class="contentRow-minor">{$purchase.Product.getExtraDescription($fullExtra)}</div>
								</div>
							</div>
							<xf:if is="$fullExtra.extra_reward == 'instructions' && $fullExtra.instructions">
								<h2 class="block-textHeader block-textHeader--scaled">
									<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up :next">{{ phrase('xr_pm_click_for_usage_instructions') }}</span>
								</h2>
								<article class="block-body block-body--collapsible">
									{{ bb_code($fullExtra.getInstructions($purchase.Product.product_title), 'xr_pm_purchase_extra', $purchase) }}
								</article>
							</xf:if>
							<xf:if is="$fullExtra.extra_reward == 'file' && $fullExtra.Extra">
								<h2 class="block-textHeader block-textHeader--scaled">
									<span class="collapseTrigger collapseTrigger--block" data-xf-click="toggle" data-target="< :up :next">{{ phrase('xr_pm_click_for_your_additional_file') }}</span>
								</h2>
								<article class="block-body block-body--collapsible">
									<xf:macro template="xr_pm_attachment_macros" name="displayer"
										arg-attachment="{$fullExtra.Extra}"
										arg-row="{{ false }}"
										arg-link="attachments"
									/>
								</article>
							</xf:if>
						</div>
					</xf:if>
				</xf:foreach>
			</div>
		</div>
	</div>
</xf:if>

<xf:if is="$purchase.canPurchaseExtras()">
	<div class="block">
		<div class="block-container">
			<h3 class="block-minorHeader">{{ phrase('xr_pm_available_extras') }}</h3>
			<div class="block-body">
				<xf:foreach loop="$purchase.Product.extras" key="$extraId" value="$extra">
					<xf:if is="{$purchase.getUnpurchasedExtras().{$extraId}}">
						<div class="block-row block-row--separated">
							<div class="contentRow">
								<div class="contentRow-main">
									<h2 class="contentRow-title">{$extra.extra_title} <span class="label label--primary">{$extra.extra_price|xr_pm_currency($purchase.purchase_currency)}</span></h2>
									<div class="contentRow-minor">{$purchase.Product.getExtraDescription($extra)}</div>
								</div>
								<div class="contentRow-extra">
									<xf:button icon="purchase" href="{{ link('products/purchase/extras', $purchase, {'extra_id': $extraId}) }}" class="" overlay="true">
										<xf:if is="$extra.extra_price">
											{{ phrase('xr_pm_buy_now') }}
										<xf:else />
											{{ phrase('xr_pm_get_free_now') }}
										</xf:if>
									</xf:button>
								</div>
							</div>
						</div>
					</xf:if>
				</xf:foreach>
			</div>
		</div>
	</div>
</xf:if>

<xf:page option="searchConstraints" value="{{ {
	phrase('xr_pm_products'): {'search_type': 'xr_pm_product'}
} }}" />]]></template>
</templates>
